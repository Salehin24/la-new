<link href="<?php echo base_url() ?>assets/plugins/select2/dist/css/select2.min.css" rel="stylesheet">
<link href="<?php echo base_url() ?>assets/plugins/select2-bootstrap4/dist/select2-bootstrap4.min.css" rel="stylesheet">
<div class="bg-alice-blue py-3">
    <div class="container-lg">
        <div class="card border-0 rounded-0 shadow-sm">
            <div class="card-body">
                <div class="row justify-content-center">
                    <div class="col-xl-12 text-center px-4">
                        <div class="f1">
                            <h3 class="mb-1 fw-semi-bold">Course Creation Process</h3>
                            <div class="f1-steps">
                                <div class="f1-progress">
                                    <div class="f1-progress-line" data-now-value="16.66" data-number-of-steps="6"
                                        style="width: 16.66%;"></div>
                                </div>
                                <div class="f1-step step1 active">
                                    <div class="f1-step-icon"><i class="fas fa-pencil-alt"></i></div>
                                    <p>Start</p>
                                </div>
                                <div class="f1-step step2">
                                    <div class="f1-step-icon"><i class="fas fa-eye"></i></div>
                                    <p>Overview</p>
                                </div>
                                <div class="f1-step step3">
                                    <div class="f1-step-icon"><i class="fas fa-book-open"></i></div>
                                    <p>Lessons</p>
                                </div>
                                <div class="f1-step step4">
                                    <div class="f1-step-icon"><i class="fas fa-dollar-sign"></i></div>
                                    <p>Pricing</p>
                                </div>
                                <div class="f1-step step5">
                                    <div class="f1-step-icon"><i class="fas fa-level-up-alt"></i></div>
                                    <p>Promotion</p>
                                </div>
                                <div class="f1-step step6">
                                    <div class="f1-step-icon"><i class="far fa-paper-plane"></i></div>
                                    <p>Review &amp; Publish</p>
                                </div>
                            </div>
                            <fieldset class="field1" style="display: block;">
                                <h5 class="mb-2 fw-semi-bold">Course Model:</h5>
                                <p>Here's where you start by accepting the rules, regulations, terms & conditions</p>
                                <h5>How you want to sell your course</h5>
                                <p>It is a long established fact that a reader will be distracted by the readable
                                    content of a page when looking at its layout. The point of using Lorem Ipsum is that
                                    it has a more-or-less normal distribution of letters, as opposed to using 'Content
                                    here,</p>
                                <p>What you will get &amp; rules to follow:</p>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th scope="col">Benefits</th>
                                                <th scope="col" class="text-center">Sale</th>
                                                <th scope="col" class="text-center">Subscription</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Instructor Share | Lead Academy share</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Social media announcement or teaser</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Social media post</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>We will do paid marketing like fb boost, bulk sms etc.</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Promote to 50k+ audience</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>You can take live session on our fb page/group</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>We will prioritize your course at our bigger events like
                                                    competitions, festivals, admission fairs etc. based on your
                                                    activities</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>We can make your teaser video if you can come to our office</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Private group chat with lead academy team to get special support and
                                                    updates</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>lead academy brand ambassadors will promote your course</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>During any of our campaigns your pre approvals will be open, so that
                                                    you can do any promotional activities to our community</td>
                                                    <td class="text-center"><i class="fas fa-check"></i></td>
                                                    <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>we will give you instructor's level and badges for high quality
                                                    course performance with benefits</td>
                                                    <td class="text-center"><i class="fas fa-check"></i></td>
                                                    <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>you will get 42% from every enrollments</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Activate Benefits</td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <td class="text-center"><i class="fas fa-check"></i></td>
                                                <!-- <td class="width-150-md text-center">
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox"
                                                            id="flexSwitchCheckDefault">
                                                        <label class="form-check-label"
                                                            for="flexSwitchCheckDefault"></label>
                                                    </div>
                                                </td>
                                                <td class="width-150-md text-center">
                                                    <div class="form-check form-switch">
                                                        <input class="form-check-input" type="checkbox"
                                                            id="flexSwitchCheckDefault2">
                                                        <label class="form-check-label"
                                                            for="flexSwitchCheckDefault2"></label>
                                                    </div>
                                                </td> -->
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                    I read and agree to the <a
                                            href="<?php echo base_url($enterprise_shortname .'/terms-condition'); ?>">Terms & Conditions</a>,
                                        <a href="<?php echo base_url($enterprise_shortname. '/privacy-policy'); ?>">
                                        Privacy Policy</a>,
                                        <a href="<?php echo base_url($enterprise_shortname. '/refund-policy'); ?>"> and Return and Refund Policy.</a>
                                    </label>
                                </div>
                                <div class="f1-buttons">
                                    <button type="button" class="btn btn-dark-cerulean btn-next">Next</button>
                                </div>
                            </fieldset>

                            <fieldset class="field2">
                                <h5 class="mb-2 fw-semi-bold">Course Overview</h5>
                                <p>Here's where you add course information, trailer, thumbnail</p>
                                <?php echo form_open_multipart($enterprise_shortname .'/instructor-course-save','id="save_course"')?>
                                <div class="row">
                                    
                                    <div class="col-md-7">
                                        <div class="mb-3">
                                            <label for="courseTitle" class="form-label">Course Title <span class="text-danger">*</span></label>
                                            <input type="text" name="courseTitle" class="form-control" id="courseTitle">
                                        </div>
                                        <div class="mb-3">
                                            <label for="aboutCourse" class="form-label">About This Course / Course
                                                Objective</label>
                                            <textarea class="form-control" name="aboutCourse" id="aboutCourse"
                                                rows="3"></textarea>
                                            <input type="hidden" name="faculty_id" value="<?php echo $faculty_id?>">
                                        </div>
                                        <div class="mb-3">
                                            <label for="studentsWillLearn" class="form-label">What students will
                                                learn</label>
                                            <div class="col-md-12">
                                                <div id="outcomes_area">
                                                    <div class="d-flex mt-2">
                                                        <div class="flex-grow-1">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control outcomes-1"
                                                                    name="benifits[]" id="outcomes"
                                                                    placeholder="<?php echo display('what_you_will_learn'); ?>"  onkeyup="characterlimitation('outcomes', 1, 40, 'outcomes-msgcount')">
                                                                    <span class=" text-danger">Only <span
                                                                            class="outcomes-msgcount-1">40</span>
                                                                        characters remaining</span>
                                                            </div>
                                                        </div>
                                                        <div class="">
                                                            <button type="button"
                                                                class="btn btn-danger btn-sm custom_btn  m-t-0 ms-2"
                                                                name="button" onclick="removeOutcome(this)"> <i
                                                                    class="fa fa-minus"></i> </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="d-flex mt-2 text-end">
                                                    <div class="col-12">
                                                        <button type="button"
                                                            class="btn btn-success text-white btn-sm custom_btn ms-2"
                                                            name="button" onclick="appendOutcome()"> <i
                                                                class="fa fa-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="studentsRequirement" class="form-label">What students need or
                                                require to learn this course? (Pre Requisites)</label>
                                            <div class="col-sm-12">
                                                <div id="requirement_area">
                                                    <div class="d-flex mt-2">
                                                        <div class="flex-grow-1">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control requirements-1"
                                                                    name="requirements[]" id="requirements"
                                                                    placeholder="<?php echo display('course') . " " . display('requirements'); ?>"  onkeyup="characterlimitation('requirements', 1, 40, 'requirements-msgcount')">
                                                                    <span class=" text-danger">Only <span class="requirements-msgcount-1">40</span> characters remaining</span>
                                                            </div>
                                                        </div>
                                                        <div class="">
                                                            <button type='button'
                                                                class='btn btn-danger btn-sm custom_btn m-t-0 ms-2'
                                                                name='button' onclick='removeRequirement(this)'> <i
                                                                    class='fa fa-minus'></i> </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="d-flex mt-2 text-end">
                                                    <div class="col-12">
                                                        <a href="javascript:void(0)"
                                                            class="btn btn-success text-white btn-sm custom_btn ms-2"
                                                            onclick="appendRequirement()"><i class="fa fa-plus"></i>
                                                        </a>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="skillsGainByStudent" class="form-label">Learner Career
                                                Outcomes</label>
                                            <div id="skillsGainByStudent_div">
                                                <div class="d-flex mt-2">
                                                    <div class="flex-grow-1">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control carrer-out-1"
                                                                name="skillsGainByStudent[]" id="skillsGainByStudent"
                                                                placeholder="<?php echo "Learner Career Outcomes"; ?>" onkeyup="characterlimitation('carrer-out', 1, 40, 'career-msgcount')">
                                                                <span class=" text-danger">Only <span class="career-msgcount-1">40</span> characters remaining</span>
                                                        </div>
                                                    </div>
                                                    <div class="">
                                                        <button type='button'
                                                            class='btn btn-danger btn-sm custom_btn m-t-0 ms-2'
                                                            name='button' onclick='removecareer(this)'> <i
                                                                class='fa fa-minus'></i> </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="d-flex mt-2 text-end">
                                                <div class="col-12">
                                                    <button type="button"
                                                        class="btn btn-success text-white btn-sm custom_btn ms-2"
                                                        name="button" onclick="career_ourcomes()" > <i
                                                            class="fa fa-plus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <div class="mb-3">
                                            <label for="courseContents" class="form-label">Course Contents /
                                                Material</label>
                                            <textarea class="form-control" name="courseContents" id="courseContents"
                                                rows="5"></textarea>
                                        </div> -->
                                        <!-- <div class="mb-3">
                                            <label for="courseResult" class="form-label">Course Result / What will
                                                learners have in the end of this course ?</label>
                                            <textarea class="form-control" name="courseResult" id="courseResult"
                                                rows="5"></textarea>
                                        </div> -->

                                        <!-- <div class="mb-3">
                                            <label for="course_isfor" class="form-label">Who This course is for ?</label>
                                            <textarea class="form-control" name="course_isfor" id="course_isfor" rows="5"></textarea>
                                        </div> -->
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="passing_grade" class="form-label">Passing grade <span class="text-danger"> (%)</span></label>
                                                <input type="number" name="passing_grade" class="form-control"
                                                    id="passing_grade">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="mb-3">
                                            <label for="courseCatagory" class="form-label">Category <span class="text-danger">*</span></label>

                                            <?php echo  form_dropdown('courseCatagory',($category_list?$category_list:''),null, 'class="form-control select2 required" id="courseCatagory" onchange="get_subcategory(this.value)"') ?>
                                        </div>
                                        <div class="mb-3">
                                            <label for="courseSubCatagory" class="form-label">Sub Category</label>
                                            <select class="form-select" aria-label="Default select example"
                                                id="courseSubCatagory" name="category_id">

                                            </select>
                                        </div>


                                        <div class="mb-3">
                                            <label for="related_course" class="form-label">Related Course</label>

                                            <?php echo  form_dropdown('related_course[]',($related_courses?$related_courses:''),null, 'class="form-select placeholder-single"   id="related_course" multiple') ?>
                                        </div>
                                        <div class="mb-3">
                                            <label for="course_level"
                                                class="form-label"><?php echo display('course_level') ?> <span class="text-danger">*</span></label>
                                            <select class="form-select" name="course_level"
                                                aria-label="Default select example" id="course_level">
                                                <option value="">Select Level</option>
                                                <option value="1">Beginner</option>
                                                <option value="2">Intermediate</option>
                                                <option value="3">Advanced</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            
                                            <label for="Language" class="form-label">Language</label>
                                            <select class="form-select" aria-label="Default select example"
                                                id="Language" name="language">
                                                <?php foreach($get_languages as $language_k => $language_val){ ?>
                                                <option value="<?php echo $language_k; ?>">
                                                    <?php echo $language_val; ?></option>
                                                <?php } ?>
                                            </select>
                                        </div>

                                       
                                        <div class="mb-3">
                                            <label for="relatedResources" class="form-label">Related Resources</label>

                                            <div class="col-md-12">
                                                <div id="related_resourcess">
                                                    <div class="d-flex mt-2">
                                                        <div class="flex-grow-1">
                                                            <div class="form-group">
                                                                <input type="text" class="form-control"
                                                                    name="relatedResources[]" id="relatedResources"
                                                                    placeholder="Related Resources">
                                                            </div>
                                                        </div>
                                                        <div class="">
                                                            <button type='button'
                                                                class='btn btn-danger btn-sm custom_btn m-t-0 ms-2'
                                                                name='button' onclick='removeresources(this)'> <i
                                                                    class='fa fa-minus'></i> </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="d-flex mt-2 text-end">
                                                    <div class="col-12">
                                                        <button type="button"
                                                            class="btn btn-success text-white btn-sm custom_btn ms-2"
                                                            name="button" onclick="appendRelatedresources()"> <i
                                                                class="fa fa-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="mb-3">
                                            <label for="skillsgain" class="form-label">Skills you will gain</label>
                                            <div id="skillsgain_div">
                                                <div class="d-flex mt-2">
                                                    <div class="flex-grow-1">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control skillsgain-1 " name="skillsgain[]"
                                                                id="skillsgain" placeholder="Skills You will gain"  onkeyup="characterlimitation('skillsgain', 1, 20, 'skillgain-msgcount')">
                                                                <span class=" text-danger">Only <span class="skillgain-msgcount-1">20</span> characters remaining</span>
                                                        </div>
                                                    </div>
                                                    <div class="">
                                                        <button type="button"
                                                            class="btn btn-danger text-white btn-sm custom_btn ms-2"
                                                            name="button" onclick="removeskills(this)"> <i
                                                                class="fa fa-minus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="d-flex mt-2 text-end">
                                                <div class="col-12">
                                                    <button type="button"
                                                        class="btn btn-success text-white btn-sm custom_btn ms-2"
                                                        name="button" onclick="addgainskills()"> <i
                                                            class="fa fa-plus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="hidden" class="form-control" name="url" id="url">

                                    <div class="col-md-12">
                                        <p class="fw-bold">Course Promotional Video Trailer</p>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-12">
                                                <div class="border">
                                                    <div class="ratio ratio-16x9 video-upload">
                                                        <!--  <video width="400" controls><source src="" id="video_here"></video>    -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-5">
                                                <p class="pt-4">Students who watch a well-made promo video are 5x more
                                                    likely to
                                                    enroll in your course.</p>
                                                <p>We have seen that statistic go up to 10x for exceptionally awesome
                                                    videos</p>

                                                <div class="d-flex   align-items-center">
                                                    <input
                                                        class="form-control form-control-lg fileuploader promotionalvideo w-auto"
                                                        type="file" id="formFile" name="video_trailer" accept="video/*">
                                                    <input type="hidden" value="" name="old_video" id="old_video">
                                                    <div class="px-2" id="trailervideo_delete_content" style="display:none">
                                                        <a class="btn btn-danger py-2 text-capitalize"
                                                            href="javascript:void(0)"
                                                            onclick="cancel_trailer_video()">cancel</a>
                                                    </div>
                                                </div>

                                                <br>
                                                <div id="progress-container" class="progress" style='display:none'>
                                                    <div id="progress"
                                                        class="progress-bar progress-bar-info progress-bar-striped active"
                                                        role="progressbar" aria-valuenow="46" aria-valuemin="0"
                                                        aria-valuemax="100" style="width: 0%">&nbsp;0%
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-md-12">
                                        <p class="fw-bold">Course Mini Thumbnail <span class="text-danger">*</span> <span class="text-danger"> (398*224 Pixels)</span> </p>
                                        <div class="row align-items-end mb-4">
                                            <div class="col-md-4">
                                                <!-- <div class="border" style="min-height: 224px;max-width: 398px;"> -->
                                                    <!-- ratio ratio-16x9 -->
                                                    <div class=" img-upload border" style="height: 171px;max-width: 312px;">

                                                    </div>
                                                <!-- </div> -->
                                            </div>
                                            <div class="col-md-6">
                                                <!-- <p class="mt-4">Upload your course mini thumbnail here. It can be a short gif
                                                    animation or interesting thumbnail to make learners curious about
                                                    your course and click to see details </p>
                                                <p>Important Guidelines: 398*224 Pixels; .jpg, .jpeg, .png, .gif no text
                                                    on the image short gif animation uploadable</p> -->

                                                <input class="form-control form-control-lg imguploader" type="file"
                                                    id="imgupload" name="mini_thumbnail" accept="image/*">
                                                <input type="hidden" name="old_minithum" value="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <p class="fw-bold">Course Mini Thumbnail Hover <span class="text-danger">*</span> <span class="text-danger"> (312*345 Pixels)</span></p>
                                        <div class="row align-items-end mb-4">
                                            <div class="col-md-4">
                                                <div class="border" style="min-height:345px;max-width: 312px;">
                                                <!-- ratio ratio-16x9  -->
                                                    <div class="img-upload2">

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <!-- <p class="mt-4">Upload your course mini thumbnail here. It can be a short gif
                                                    animation or interesting thumbnail to make learners curious about
                                                    your course and click to see details </p>
                                                <p>Important Guidelines: 312*345 Pixels; .jpg, .jpeg, .png, .gif no text
                                                    on the image short gif animation uploadable</p> -->

                                                <input class="form-control form-control-lg imguploader2" type="file"
                                                    id="imgupload2" name="thumbnail_hover" accept="image/*">
                                                <input type="hidden" name="old_hover_thum" id="old_hover_thum" value="">

                                            </div>
                                            <input type="hidden" name="course_id" id="course_id">
                                        </div>
                                    </div>

                                    <div class="col-md-12">
                                       <p class="fw-bold">Cover (Image/Thumbnail) <span class="text-danger">*</span> <span class="text-danger"> (1903 x 476 Pixels)</span></p>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-12">
                                                <div class="border" style="min-height:310px;max-widht:1903px;">
                                                <!-- ratio ratio-16x9 -->
                                                    <div class=" video-upload2">

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-8">
                                            <p class="pt-4"></p>
                                                <!-- <p class="pt-4">Cover image</p>
                                                <p>Important Guidelines: 1903 x 476 Pixels; .jpg, .jpeg, .png, .gif no
                                                    text on the image short gif animation uploadable</p> -->

                                                <input class="form-control form-control-lg fileuploader2" type="file"
                                                    id="formFile2" name="thumbnail" accept="image/*">
                                                <input type="hidden" name="old_thumbnail" id="old_thumbnail" value="">
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <?php echo form_close()?>
                                <div class="f2-buttons text-end nxtpreviousbtn">
                                    <button type="button" class="btn btn-previous">Previous</button>
                                    <button type="button" class="btn btn-dark-cerulean btn-next">Next</button>
                                </div>
                            </fieldset>

                            <fieldset class="field3">

                                <h5 class="mb-2 fw-semi-bold">Course Curriculumn and Lessons</h5>
                                <p>Here's where you add course content like course sections, lessons, assignments and
                                    more</p>



                                <div class="accordion mb-4" id="accordionClass">
                                    <div class="accordion-item mb-4" id="chapter_div_1">
                                        <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                                                aria-controls="panelsStayOpen-collapseOne">
                                                Chapter : <span id="sectionlabel_1"></span>
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show"
                                            aria-labelledby="panelsStayOpen-headingOne">
                                            <div class="accordion-body p-xl-5">
                                                <div class="row g-3 mb-4">
                                                    <div class="col-md-7">
                                                        <div class="d-md-flex align-items-center">
                                                            <label for="chapter_title"
                                                                class="col-md-3 mb-2 mb-md-0">Chapter Title <span class="text-danger">*</span></label>
                                                            <input type="text" class="form-control" id="chapter_title_1"
                                                                name="chapter_title">
                                                            <input type="hidden" id="chapter_id_1">
                                                        </div>
                                                    </div>
                                                    <div class="col-auto">
                                                        <button class="btn btn-dark-cerulean " onclick="save_chapter(1)">
                                                            <i class="far fa-save me-2"></i>Save
                                                        </button>
                                                    </div>
                                                    <div class="col-auto">
                                                        <span class="input-group-text btn-danger py-2"
                                                            onclick="remove_chapter(1)">
                                                            <i class="far fa-trash-alt"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                                <div id="lessoncontent_1">
                                                </div>
                                                <div class="wrapper">
                                                    <div class="buttons mb-4">
                                                        <button class="clone btn btn-dark-cerulean mb-1"
                                                            onclick="add_lesson(1)"><i
                                                                class="fas fa-plus me-2"></i>Lesson</button>
                                                        <button class="clone btn btn-dark-cerulean mb-1"
                                                            onclick="add_newquiz(1)"><i
                                                                class="fas fa-plus me-2"></i>Quiz</button>
                                                        <button class="clone btn btn-dark-cerulean mb-1"
                                                            onclick="add_newproject(1)"><i
                                                                class="fas fa-plus me-2"></i>Project/Assignment</button>

                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                    </div>


                                </div>

                                <div class="d-lg-flex justify-content-between mb-4">
                                    <button class="btn btn-lg btn-dark-cerulean mb-2 mb-lg-0"
                                        onclick="add_newchapter()">Create New Chapter</button>
                                    <button class="btn btn-lg btn-dark-cerulean mb-2 mb-lg-0"
                                        onclick="downloadablefile()">Exercise/Material -
                                        Downloadable Files <span id="showfile_count"></span></button>
                                    <!-- <button class="btn btn-lg btn-dark-cerulean mb-2 mb-lg-0">Bulk Upload</button> -->
                                </div>

                                <div class="f3-buttons text-end nxtpreviousbtn">
                                    <button type="button" class="btn btn-previous">Previous</button>
                                    <button type="button" class="btn btn-dark-cerulean btn-next">Next</button>
                                </div>
                            </fieldset>



                            <fieldset class="field4">

                                <h5>Pricing</h5>
                                <p>Here's where you set the price of your course</p>

                                <div class="row">
                                    <div class="col-lg-6">

                                        <div class="d-flex mb-3">
                                            <div class="form-check me-5">
                                                <input class="form-check-input" type="checkbox" value=""
                                                    id="purchasePricing" name="course_types[]">
                                                <label class="form-check-label" for="purchasePricing"> Purchase </label>
                                            </div>
                                            <div class="form-check me-5">
                                                <input class="form-check-input" type="checkbox" value=""
                                                    id="subscriptionPricing" name="course_types[]">
                                                <label class="form-check-label" for="subscriptionPricing"> Subscription
                                                </label>
                                            </div>
                                            <div class="form-check me-5">
                                                <input class="form-check-input" type="checkbox" value=""
                                                    id="freePricing" name="course_types[]">
                                                <label class="form-check-label" for="freePricing"> Free </label>
                                            </div>
                                        </div>

                                        <div class="row" id="priceContent" style="display: none;">


                                            <div class="input-group mb-3">
                                                <span class="input-group-text py-2 px-4">Base Price</span>
                                                <input type="text"
                                                    class="form-control valid_number my-3 my-sm-0 w-sm-100"
                                                    aria-label="Amount (to the nearest dollar)" id="course_old_price"
                                                    name="course_old_price" onkeyup="basePrice()">
                                                <span class="input-group-text py-2 px-4">BDT</span>
                                            </div>

                                            <div class="input-group mb-3">
                                                <span class="input-group-text py-2 px-4">Discount Type</span>
                                                <select name="discount_type" class="form-control select2"
                                                    id="discount_type" onchange="basePrice()">
                                                    <option value="">Select Disocunt Type</option>
                                                    <option value="1">Fixed Disocunt</option>
                                                    <option value="2">Percentage</option>
                                                </select>
                                            </div>

                                            <div class="input-group mb-3">
                                                <span class="input-group-text py-2 px-4">Discount</span>
                                                <input type="text"
                                                    class="form-control valid_number my-3 my-sm-0 w-sm-100"
                                                    aria-label="Amount (to the nearest dollar)" id="course_discount"
                                                    name="course_discount" onkeyup="basePrice()">
                                                <span class="input-group-text py-2 px-4">BDT</span>
                                            </div>

                                            <div class="input-group mb-3">
                                                <span class="input-group-text py-2 px-4">Price</span>
                                                <input type="text"
                                                    class="form-control valid_number my-3 my-sm-0 w-sm-100"
                                                    aria-label="Amount (to the nearest dollar)" id="course_price"
                                                    name="course_price" readonly="">
                                                <span class="input-group-text py-2 px-4">BDT</span>
                                            </div>
                                        </div>

                                        <!-- <div class="d-flex mb-3" id="apply-discount-area">
                                            <div class="form-check me-5">
                                                <input class="form-check-input" type="checkbox" value="" id="is_offer"
                                                    name="is_offer">
                                                <label class="form-check-label" for="is_offer">
                                                    Apply Discount
                                                </label>
                                            </div>
                                        </div> -->
                                        <!-- <div class="row" id="offer_coursediv" style="display: none;">

                                            <div class="col-md-12 mb-3">
                                                <div class="d-md-flex align-items-center">
                                                    <label for="offer_course" class="col-md-4 mb-2 mb-md-0">Select Offer
                                                        Courses :</label>
                                                    <div class="col-md-8">
                                                        <?php echo  form_dropdown('offer_course[]',($related_courses?$related_courses:''),null, 'class="form-select placeholder-single"   id="offer_course" multiple') ?>
                                                    </div>
                                                </div>
                                            </div>



                                            <div class="col-md-12">
                                                <div class="d-md-flex align-items-center">
                                                    <label for="offer_price" class="col-md-4 mb-2 mb-md-0">Price With
                                                        Offer :</label>
                                                    <div class="col-md-8">
                                                        <input type="text" name="offer_price" id="offer_price"
                                                            class="form-control valid_number">
                                                    </div>
                                                </div>
                                            </div>

                                        </div> -->
                                    </div>
                                </div>

                                <div class="f5-buttons text-end">
                                    <button type="button" class="btn btn-previous">Previous</button>
                                    <button type="button" class="btn btn-dark-cerulean btn-next">Next</button>
                                </div>

                            </fieldset>

                            <fieldset class="field5">
                                <h5 class="mb-2 fw-semi-bold">Promotion</h5>
                                <p>Here's where you get the options to promote your course</p>

                                <div class="mb-3">
                                    <h1>Coming soon</h1>
                                </div>




                                <div class="f4-buttons text-end">
                                    <button type="button" class="btn btn-previous">Previous</button>
                                    <button type="button" class="btn btn-dark-cerulean btn-next">Next</button>
                                </div>
                            </fieldset>

                            <fieldset class="field6">
                                <!-- <h5>Course message</h5>
                                <p>Write message to your students that will be sent automatically when they join or
                                    complete your course to encourage students to engage with course content. If you
                                    don't wish to send a welcome or congratulation message, leave the text box blank.
                                </p> -->

                                <!-- <div class="mb-3">
                                    <label for="welcomeMessage" class="form-label">Welcome Message</label>
                                    <textarea class="form-control" id="welcomeMessage" rows="3"></textarea>
                                </div> -->

                                <!-- <div class="mb-3">
                                    <label for="congratulationsMessage" class="form-label">Congratulations
                                        Message</label>
                                    <textarea class="form-control" id="congratulationsMessage" rows="3"></textarea>
                                </div> -->

                                <!-- <div class="bg-dark-cerulean p-4 mb-3 rounded">
                                    <h5 class="text-center text-light mb-3">Sign Course Agreement</h5>
                                    <div class="bg-light p-3 rounded mb-4">
                                        <div class="d-flex justify-content-between">
                                            <div>Sign Online</div>
                                            <div>Docusign</div>
                                        </div>
                                    </div>
                                    <div class="align-items-center d-flex justify-content-between">
                                        <div class="text-light">Sign Offline</div>
                                        <div class="text-light"> <a
                                                href="<?php echo ($docusin_link->docusign_sample?base_url($docusin_link->docusign_sample):'#'); ?>"
                                                class="download-icon ms-2 text-light"
                                                <?php echo ($docusin_link->docusign_sample?'download':'')?>>Download
                                            </a><span class="bg-light ms-2 p-2 rounded text-dark">Agreement</span></div>
                                        <div class="d-flex text-light"><span
                                                class="align-items-center bg-light lh-lg ms-2 p-2 rounded text-center text-dark w-75">UploadSign
                                                Agreement</span> <input class="form-control form-control-lg ms-2"
                                                type="file" id="docusing_file" name="docusing_file"></div>
                                    </div>
                                </div>
                                <div class="text-center">*Course agreement must be signed in order to publish course at
                                    lead academy</div> -->

                                <!-- <div class="text-center mt-5">
                                    <div class="row">
                                        <div class="col-md-2">
                                            <button class="btn btn-lg btn-dark-cerulean" onclick="course_preview()">Preview
                                                Course</button>
                                            <div class="mt-3">Check final preview before submitting the course</div>
                                        </div>
                                        <div class="col-md-2">
                                            <button class="btn btn-lg btn-dark-cerulean" onclick="course_preview()">Preview
                                                Course</button>
                                            <div class="mt-3">Check final preview before submitting the course</div>
                                        </div>
                                    </div>
                                 
                                </div> -->
                                <div class=" text-center mt-5">
                                    <button type="button" class="btn btn-lg btn-dark-cerulean" onclick="course_preview()">Preview
                                                Course</button>
                                    <button type="button" class="btn btn-lg btn-dark-cerulean" target="_blank" onclick="course_public_view()">Public view</button>
                                </div>
                                <div class="f6-buttons text-end">
                                    <button type="button" class="btn btn-previous">Previous</button>
                                    <button type="submit" class="btn btn-dark-cerulean btn-submit"
                                        id="final_step">Finish</button>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="preview_modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Course Preview</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body previewdetails">
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="multiple_filemodal" tabindex="-1" aria-labelledby="multiple_filemodallabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="multiple_filemodallabel">Downloadable Files</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row" id="downloadable_div">
                        <div class="row g-3 mb-4" id="course_resoursed_1">
                            <div class="col-md-7">
                                <div class="d-md-flex align-items-center">
                                    <label for="downloadable_file" class="col-md-3 mb-2 mb-md-0 fw-bold">Select
                                        File</label>
                                    <input type="file" class="form-control downloadfile" id="downloadable_file1"
                                        name="downloadable_file[]" onchange="excersizefileuploadpr('1','')"  >

                                </div>
                                 <!-- Progress bar -->
                                 <div class="progress resource_progress" id="progress_<?php echo 1;?>" style="margin-left: 158px;">
                                    <div class="progress-bar" id="progress-bar_<?php echo 1;?>"></div>
                                </div>
                                <!-- Display upload status -->
                                <div class="uploadstatus" id="uploadStatus_<?php echo 1;?>" style="margin-left: 158px"></div>
                                <input type="hidden" class="last_record_id" id="last_record_id_1">
                            </div>
                            <div class="col-auto">
                                <button class="btn btn-danger removesl" id="remove_sl_1" onclick="remove_file(this,'1')">Remove</button>
                            </div>

                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-7 text-end">
                            <button class="btn btn-success" onclick="add_newfiles('1','1')">
                                Add More
                            </button>
                            <!-- <button type="button" class="btn btn-primary" id="save_downloadablefile">Save Files</button> -->
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="<?php echo base_url() ?>assets/dist/js/vimeo-upload.js"></script>
<script>
function myFunction() {
    /* Get the text field */
    var copyText = document.getElementById("myInput");

    /* Select the text field */
    copyText.select();
    copyText.setSelectionRange(0, 99999); /* For mobile devices */

    /* Copy the text inside the text field */
    navigator.clipboard.writeText(copyText.value);

    /* Alert the copied text */
    alert("Copied the text: " + copyText.value);
}

$(document).ready(function() {

    $('.wrapper').on('click', '.clone', function() {
        $('.clone').closest('.wrapper').find('.element').first().clone().appendTo('.results');
    });

});

//   ============= its for characterlimitation 
function characterlimitation(cls, sl, maxchars, msgcls){
    var value = $('.'+cls+'-'+sl).val();
    var tlength = value.length;
    $('.'+cls+'-'+sl).val(value.substring(0, maxchars));
    remain = maxchars - parseInt(tlength);
    $('.'+msgcls+'-'+sl).text(remain);
}

("use strict");
var outc=1;
function appendOutcome() { 
    outc++;
    var outcomes = "outcomes-"+outc+"";
    var cls = "'outcomes'";
    var msgcls = "'outcomes-msgcount'";

    $("#outcomes_area").append(
        '<div class="d-flex mt-2">\n\
        <div class="flex-grow-1">\n\
        <div class="form-group">\n\
        <input type="text" class="form-control '+outcomes+'"  onkeyup="characterlimitation(' +
           cls + ',' + outc + ',40,'+msgcls+')" name="benifits[]" id="outcomes" placeholder="What you will learn">\n\
           <span class=" text-danger">Only <span class="outcomes-msgcount-'+outc+'">40</span> characters remaining</span>\n\
        </div></div><div class="">\n\
        <button type="button" class="btn btn-danger btn-sm custom_btn  m-t-0 ms-2" name="button" onclick="removeOutcome(this)"> <i class="fa fa-minus"></i> </button>\n\
        </div>\n\
        </div>'
    );
}


function appendRelatedresources() {
    $("#related_resourcess").append(
        ' <div class="d-flex mt-2">\n\
         <div class="flex-grow-1">\n\
          <div class="form-group">\n\
           <input type="text" class="form-control"  name="relatedResources[]" id="relatedResources" placeholder="Related Resources"></div></div>\n\
            <div class="">\n\
                <button type="button" class="btn btn-danger text-white btn-sm custom_btn ms-2" name="button"onclick="removeresources(this)"> <i class="fa fa-minus"></i>\n\
                </button>\n\
            </div>\n\
              </div>'
    );
}
("use strict");

function removeOutcome(outcomeElem) {
    $(outcomeElem).parent().parent().remove();
}

function removeresources(outcomeElem) {
    $(outcomeElem).parent().parent().remove();
}




var co = 1;
function career_ourcomes() {
    co++;
    var outcomes = $('[name="skillsGainByStudent[]"]').length;
    var career_out = "carrer-out-"+ co+"";
    var cls = "'carrer-out'";
    var msgcls = "'career-msgcount'";
    if (outcomes >= 4) {
        toastr.error('you can not add more than four career outcomes');
        return false;
    } else {
        $("#skillsGainByStudent_div").append(
            ' <div class="d-flex mt-2">\n\
         <div class="flex-grow-1">\n\
          <div class="form-group">\n\
           <input type="text" class="form-control '+career_out+'" onkeyup="characterlimitation(' +
           cls + ',' + co + ',40,'+msgcls+')"  name="skillsGainByStudent[]" id="skillsGainByStudent" placeholder="Learner Career Outcomes">\n\
           <span class="text-danger">Only <span class="career-msgcount-' +co +'">40</span> characters remaining</span>\n\
           </div></div>\n\
           <div class="">\n\
                <button type="button" class="btn btn-danger text-white btn-sm custom_btn ms-2" name="button"onclick="removecareer(this)"> <i class="fa fa-minus"></i>\n\
                </button>\n\
            </div>\n\
              </div>'
        );
    }
}

("use strict");

function removecareer(outcomeElem) {
    $(outcomeElem).parent().parent().remove();
}
var skl = 1;
function addgainskills() {
    skl++;
    var skill = $('[name="skillsgain[]"]').length;
    var skill_out = "skillsgain-"+skl+"";
    var cls = "'skillsgain'";
    var msgcls = "'skillgain-msgcount'";

    if (skill >= 4) {
        toastr.error('you can not add more than four skills');
        return false;
    } else {
        $("#skillsgain_div").append(
            ' <div class="d-flex mt-2">\n\
         <div class="flex-grow-1">\n\
          <div class="form-group">\n\
           <input type="text" class="form-control '+skill_out+'"  onkeyup="characterlimitation(' +
           cls + ',' + skl + ',20,'+msgcls+')" name="skillsgain[]" id="skillsgain" placeholder="Skills you will gain">\n\
           <span class="text-danger">Only <span class="skillgain-msgcount-' +skl +'">20</span> characters remaining</span>\n\
           </div></div>\n\
            <div class="">\n\
                <button type="button" class="btn btn-danger text-white btn-sm custom_btn ms-2" name="button"onclick="removeskills(this)"> <i class="fa fa-minus"></i>\n\
                </button>\n\
            </div>\n\
              </div>'
        );
    }
}


function removeskills(skills) {
    $(skills).parent().parent().remove();
}


("use strict");
prest_count=1;
function appendRequirement() {
prest_count++;
    var requirement = "requirement-" + prest_count;
    var cls = '"requirement"';
    var msgcls = '"requirement-msgcount"';

    $("#requirement_area").append(
        "<div class='d-flex mt-2'>\n\
            <div class='flex-grow-1 '>\n\
            <div class='form-group'>\n\
            <input type='text' class='form-control "+requirement+"' onkeyup='characterlimitation("+cls+","+prest_count+",40,"+msgcls+")' name='requirements[]'  id='requirements' placeholder='Course Requirements'>\n\
            <span class='text-danger'>Only <span class='requirement-msgcount-" +prest_count +"'>40</span> characters remaining</span>\n\
            </div>\n\
            </div>\n\
            <div class=''>\n\
            <button type='button' class='btn btn-danger btn-sm custom_btn m-t-0 ms-2' name='button' onclick='removeRequirement(this)'> <i class='fa fa-minus'></i> </button>\n\
            </div>\n\
            </div>"
    );
}

("use strict");

function removeRequirement(requirementElem) {
    $(requirementElem).parent().parent().remove();
}

// function add_newfiles() {
//     var flenth = $('[name="downloadable_file[]"]').length;
//     var row = (Math.random() + 1).toString(36).substring(7);
//     $("#downloadable_div").append(
//         '<div class="row g-3 mb-4">\n\
//                 <div class="col-md-7">\n\
//                     <div class="d-md-flex align-items-center">\n\
//                         <label for="downloadable_file" class="col-md-3 mb-2 mb-md-0 fw-bold">Select File</label>\n\
//                         <input type="file" class="form-control downloadfile" id="downloadable_file' + row + '" name="downloadable_file[]">\n\
//                     </div>\n\
//                 </div>\n\
//                 <div class="col-auto">\n\
//                     <button class="btn btn-danger" onclick="remove_file(this)">Remove</button>\n\
//                 </div>\n\
//             </div>'
//     );
// }
var afile=0;
function add_newfiles(sl,l) {
    var flenth = $('[name="downloadable_file[]"]').length;
    var row = (Math.random() + 1).toString(36).substring(7);
   var testcount=$(".downloadfile").length;


   if(testcount){
        afile=testcount+1; 
    }else{
        afile = 1;
    }
    $("#downloadable_div").append(
        '<div class="row g-3 mb-2" id="course_resoursed_'+afile+'">\n\
                <div class="col-md-7">\n\
                    <div class="d-md-flex align-items-center">\n\
                        <label for="downloadable_file" class="col-md-3 mb-2 mb-md-0 fw-bold">Select File</label>\n\
                        <input type="file" class="form-control downloadfile" id="downloadable_file' + afile + '" name="downloadable_file[]" onchange="excersizefileuploadpr('+"'"+afile+"'"+','+"''"+')">\n\
                    </div>\n\
                    <div class="progress resource_progress" id="progress_'+afile+'" style="margin-left: 158px;">\n\
                        <div class="progress-bar" id="progress-bar_'+afile+'"></div>\n\
                    </div>\n\
                    <div class="uploadstatus" id="uploadStatus_'+afile+'" style="margin-left: 158px"></div>\n\
                    <input type="hidden" class="last_record_id" id="last_record_id_' + afile + '">\n\
                </div>\n\
                <div class="col-auto">\n\
                    <button class="btn btn-danger removesl" id="remove_sl_'+afile+'" onclick="remove_file(this,'+afile+')">Remove</button>\n\
                </div>\n\
        </div>'
    );

    afile++;
}

("use strict");

// function remove_file(requirementElem) {
//     $(requirementElem).parent().parent().remove();
// }

// function remove_file(requirementElem,id) {
//     var course_id=$("#course_id").val();
//     var csrf_test_name = $('[name="csrf_test_name"]').val();
//     var base_urld = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
//     var status ="delete";
//     $.ajax({
//         url:base_url + "frontend/instructor/course_download_upload",
//         type: "POST",
//         data: {
//             csrf_test_name: csrf_test_name,
//             course_id:course_id,
//             file_id:id,
//             status:status,
//         },
//         success: function(r) {
//         toastr.success("Delete Successfully");

//         },
//     });
//     var RRemove=$(".downloadfile").length;
                   
//     if(id==(RRemove+1) || RRemove==1 ){
//         return true;
//     }else{
//         $(requirementElem).parent().parent().remove();
//         var k=id;
//         // alert(k);
//         for(k=id+1; k<=RRemove; k++){
//             $("#downloadable_div>#course_resoursed_"+sl+"").attr({id:"course_resoursed_"+id+""});
//             $("#downloadable_div>#course_resoursed_"+k+"").attr({id:"course_resoursed_"+id+""});
//             $("#course_resoursed_"+id+">.col-md-7>#progress_"+k+"").attr({id:"progress_"+id+""});
//             $("#course_resoursed_"+id+">.col-md-7>#progress_"+id+">#progress-bar_"+k+"").attr({id:"progress-bar_"+id+""});
//             $("#course_resoursed_"+id+">.col-md-7>#uploadStatus_"+id+"").attr({id:"uploadStatus_"+id+""});
//             $("#course_resoursed_"+id+">.col-md-7>#uploadStatus_"+k+"").attr({id:"uploadStatus_"+id+""});

//             $("#downloadable_div>#course_resoursed_"+id+">.col-auto>button.btn.btn-danger").attr({onclick:"remove_file(this,'',"+id+")"});

//             $("#course_resoursed_"+id+">.col-md-7>.d-md-flex.align-items-center>#downloadable_file"+k+"").attr({id:"downloadable_file"+id+""});
//             $("#course_resoursed_"+id+">.col-md-7>.d-md-flex.align-items-center>#downloadable_file"+id+"").attr({onchange:"excersizefileuploadpr("+id+",'')"});
//             id++;  
//             // .accordion-body .row.col-auto.input-group-text
//         }
//     }
      
// }

function remove_file(requirementElem,sl) {
    console.log(requirementElem);
    var last_record_id = $("#last_record_id_"+sl).val();
        if(last_record_id){
            var id = last_record_id;
        }

    var course_id=$("#course_id").val();
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    var base_urld = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var status ="delete";
    $.ajax({
        url:base_url + "frontend/instructor/course_download_upload",
        type: "POST",
        data: {
            csrf_test_name: csrf_test_name,
            course_id:course_id,
            file_id:id,
            status:status,
        },
        success: function(r) {
            // console.log(r);
            toastr.success("Delete Successfully");
        },
    });
    $(requirementElem).parent().parent().remove();
    var i = 0;
    $(".downloadfile").each(function() {
        i++; 
        $(this).attr('id', "downloadable_file"+i);
        $(this).attr('onchange', "excersizefileuploadpr('"+i+"', '')");
    
    });

    var k = 0;
    $(".removesl").each(function() {
        k++; 
        $(this).attr('id', "remove_sl_"+k);
        $(this).attr('onclick', "remove_file('this', '"+k+"')");
    });
    
    var l = 0;
    $(".resource_progress .progress-bar").each(function() {
        l++; 
        $(this).attr('id', "progress-bar_"+l);
    }); 

    var m = 0;
    $(".resource_progress").each(function() {
        m++; 
        $(this).attr('id', "progress_"+m);
    });

    var n = 0;
    $(".uploadstatus").each(function() {
        n++; 
        $(this).attr('id', "uploadStatus_"+n);
    });

    var p = 0;
    $(".last_record_id").each(function() {
        p++; 
        $(this).attr('id', "last_record_id_"+p);
    });
    
}


// lesson wise remove_resourcesfile
function remove_resourcesfile(sl,lesson,re_id) {
     var resources_id = $("#resourcesfile_id_" + sl + '_' + lesson+'_'+re_id).val();
 
    if (resources_id == '') {
        var div = document.getElementById("lessonresourse_" + sl + "_" + lesson+"_"+ re_id);
        div.parentNode.removeChild(div);
        toastr["success"]('Successfully Deleted');
     } else {
        var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
        var csrf_test_name = $('[name="csrf_test_name"]').val();
        $.ajax({
            url: base_url + "/instructor-delete-lesson-resourses",
            type: "POST",
            data: {
                csrf_test_name: csrf_test_name,
                resources_id: resources_id
            },
            success: function(r) {
                var div = document.getElementById("lessonresourse_" + sl + "_" + lesson+"_"+ re_id);
                div.parentNode.removeChild(div);
                toastr["success"](r);
            }
        });
    
     }
    
}

function get_subcategory(id) {

    var csrf_test_name = $('[name="csrf_test_name"]').val();
    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    $.ajax({
        url: base_url + "/get-subcategory",
        type: "POST",
        data: {
            csrf_test_name: csrf_test_name,
            category_id: id
        },
        success: function(r) {
            $("#courseSubCatagory").html('');
            $("#courseSubCatagory").append(r);

        },
    });
}


var lessoncount = 1;
var lesson_order = 1;
function add_lesson(sl) {
    
//   alert(lessoncount)
//   return false;
    var testcount=$("#lessoncontent_"+sl+">.lessonstart").length;
   if(testcount){
       lesson_order=testcount+1; 
    }else{
        lesson_order = 1;
    }

    var html = '<div class="lessonstart accordion-item mb-4 border-top" id="lessondiv' + sl + '_' + lessoncount +
        '"><h2 class="accordion-header" id="chapterlesson' + sl + '_' + lessoncount +
        '"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#lessondivopen' +
        sl + '_' + lessoncount + '" aria-expanded="false" aria-controls="lessondivopen' + sl + '_' + lessoncount +
        '">Lesson <span id="lessonlabel' + sl + '_' + lessoncount +
        '"></span></button></h2><div id="lessondivopen' + sl + '_' + lessoncount +
        '" class="accordion-collapse collapse show" aria-labelledby="chapterlesson' + sl + '_' + lessoncount +
        '"><div class="element"><div class="p-xl-5 p-3 border position-relative"><div class="position-absolute end-1 top-1"><button class="input-group-text p-2 btn-danger" onclick="remove_lesson(' +
        sl + ',' + lessoncount +
        ')"><i class="far fa-trash-alt"></i></button></div><div class="form-group row"><label for="QuiName2" class="col-md-3 mb-2 mb-md-0">Lesson Name <span class="text-danger">*</span></label><div class="col-md-8"><input type="text" class="form-control" id="lesson_name_' +
        sl + '_' + lessoncount + '"><input type="hidden" id="lesson_id_' + sl + '_' + lessoncount +
        '"></div></div><div class="mb-3"><label for="lessonDescription" class="form-label">Description</label><textarea class="form-control" id="lessonDescription_' +
        sl + '_' + lessoncount +
        '" rows="3"></textarea></div><div class="form-group row"><label for="lesson_type" class="col-sm-3 col-form-label">Lesson type<i class="text-danger"> *</i></label><div class="col-sm-8"><select  name="lesson_type" class="form-control placeholder-single" id="lesson_type_' +
        sl + '_' + lessoncount + '" onchange="lessontype(this.value,' + sl + ',' + lessoncount +
        ')" data-placeholder="Select one"><option value="">Select One</option><option value="1">video</option><option value="2">Docx file</option><option value="3">Picture</option><option value="4">PPtx</option><option value="5">pdf</option></select></div></div> <br><div class="form-group row" id="lessonshow_' +
        sl + '_' + lessoncount + '"></div><br><div class="" id="providershow_' + sl + '_' + lessoncount +
        '"></div><br><div class="form-group row"> <div class="offset-3 checkbox checkbox-success"> <input id="is_preview_' +
        sl + '_' + lessoncount + '" type="checkbox" name="is_preview" value="" onclick="check_preview(' + sl + ',' + lessoncount +
        ')"><label for="is_preview" class="ms-1">Is Preview</label> <input type="hidden" class="lessontype_status_' +
        sl + '_' + lessoncount + '" id="lessontype_status_' + sl + '_' + lessoncount +
        '"></div></div><br>\n\
        <div id="lessonresourse_'+sl+'_'+lessoncount+'">\n\
         <div class="file_part active" id="lessonresourse_'+sl+'_'+lessoncount+'_1">\n\
            <h6 class="mb-2">Add Resource<span class="text-muted ms-2">(Upload only this lesson related resource here)</span></h6>\n\
            <div class="p-lg-4 p-xl-5 p-3 border mb-2">\n\
                <div class="tab-content" id="pills-tab2Content">\n\
                    <div class="tab-pane fade show active" id="downloadFile" role="tabpanel">\n\
                      <div class="d-flex">\n\
                        <input class="form-control form-control-lg mb-1 resourse_progress downloadfilelesson" id="downloadable_file_lesson_'+sl+'_'+lessoncount+'_1" name="downloadable_file_lesson_'+sl+'_'+lessoncount+'[]" type="file" onchange="resourseProgress(' +
        sl + ',' + lessoncount + ',1)">\n\
                           <div class="col-auto">\n\
                            <button class="btn btn-danger py-12 mx-1 remove_display_none" onclick="remove_resourcesfile(' + sl + ',' + lessoncount +',1)"><i class="far fa-trash-alt"></i></button>\n\
                            </div>\n\
                            <input type="hidden" name="resourcesfiles_' + sl + '_' + lessoncount +'[]" id="resourcesfile_id_' + sl + '_' + lessoncount + '_1" value="">\n\
                      </div>\n\
                  </div>\n\
                  <div class="progress" id="progress_'+sl+'_'+lessoncount+'_1">\n\
                            <div class="progress-bar" id="progress-bar_'+sl+'_'+lessoncount+'_1"></div>\n\
                         </div>\n\
                </div>\n\
            </div>\n\
        </div>\n\
        </div>\n\
        <div><button class="btn btn-dark-cerulean float-end " onclick="add_lesson_resoursefiles(' + sl + ',' + lessoncount +')">\n\Add More\n\</button></div><br>\n\
        <div class="text-end mt-5" id="lessonsavebtn_' + sl + '_' + lessoncount +
        '"><input type="hidden" id="lesson_order_' + sl + '_' + lesson_order +'" value="'+lesson_order+'"><button type="button" class="btn btn-dark-cerulean" onclick="save_lesson(' +
        sl + ',' + lessoncount + ','+lesson_order+')" id="save_lesson_btn_'+sl+'_'+lessoncount+'">Save Lesson</button></div></div></div></div></div>';

    $("#lessoncontent_" + sl).append(html);
    lessoncount++;
    lesson_order++;

    $(".progress").hide();
   $(".remove_display_none").hide();
}
var resoursecount=2;
// id="#lessonresourse_"+sl+'_'+lesson
function add_lesson_resoursefiles(sl,lesson){
       var loadresourse='<div class="file_part active" id="lessonresourse_'+sl+'_'+lesson+'_'+resoursecount+'">\n\
            <h6 class="mb-2">Add Resource<span class="text-muted ms-2">(Upload only this lesson related resource here)</span></h6>\n\
            <div class="p-lg-4 p-xl-5 p-3 border mb-4">\n\
                <div class="tab-content" id="pills-tab2Content">\n\
                    <div class="tab-pane fade show active" id="downloadFile" role="tabpanel">\n\
                      <div class="d-flex">\n\
                        <input class="form-control form-control-lg mb-1 resourse_progress downloadfilelesson" id="downloadable_file_lesson_'+sl+'_'+lesson+'_'+resoursecount+'" name="downloadable_file_lesson_'+sl+'_'+lesson+'[]" type="file" onchange="resourseProgress(' +
        sl + ',' + lesson + ','+resoursecount+')">\n\
                             <button class="btn btn-dark-cerulean float-end d-none" onclick="add_lesson_resoursefiles(' + sl + ',' + lesson +','+resoursecount+')">\n\Add More\n\
                            </button>\n\
                            <div class="col-auto">\n\
                            <button class="btn btn-danger py-12 mx-1 " onclick="remove_resourcesfile(' + sl + ',' + lesson +','+resoursecount+')"><i class="far fa-trash-alt"></i></button>\n\
                            </div>\n\
                            <input type="hidden" name="resourcesfiles_' + sl + '_' + lesson +'[]" id="resourcesfile_id_' + sl + '_' + lesson + '_'+resoursecount+'" value="">\n\
                      </div>\n\
                    </div>\n\
                    <div class="progress" id="progress_'+sl+'_'+lesson+'_'+resoursecount+'">\n\
                            <div class="progress-bar" id="progress-bar_'+sl+'_'+lesson+'_'+resoursecount+'"></div>\n\
                         </div>\n\
                </div>\n\
            </div>\n\
        </div>';
        // "#lessonresourse_"+sl+'_'+lessoncount+'_1"
    $("#lessonresourse_"+sl+'_'+lesson).append(loadresourse);
    resoursecount ++;

    $(".remove_display_none").show();
}
  
function remove_lesson(sl, lesson) {
    var lesson_id = $("#lesson_id_" + sl + '_' + lesson).val();
    if (lesson_id == '') {
        var div = document.getElementById("lessondiv" + sl + "_" + lesson);
        div.parentNode.removeChild(div);
    } else {
        var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
        var csrf_test_name = $('[name="csrf_test_name"]').val();
        $.ajax({
            url: base_url + "/instructor-delete-lesson",
            type: "POST",
            data: {
                csrf_test_name: csrf_test_name,
                lesson_id: lesson_id
            },
            success: function(r) {
                var div = document.getElementById("lessondiv" + sl + "_" + lesson);
                div.parentNode.removeChild(div);
                toastr["success"](r);
            }
        });
    }
}

var chapter_no = 2;

function add_newchapter() {
    var testcount=$("#accordionClass > div.accordion-item").length;
    if(testcount){
       chapter_no=testcount+1; 
    }
    var chaptercontent = '<div class="accordion-item mb-4" id="chapter_div_' + chapter_no +
        '"><h2 class="accordion-header border-top" id="panelsStayOpen-heading' + chapter_no +
        '"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse' +
        chapter_no + '" aria-expanded="true" aria-controls="panelsStayOpen-collapse' + chapter_no +
        '">Chapter : <span id="sectionlabel_' + chapter_no + '"></span></button></h2><div id="panelsStayOpen-collapse' +
        chapter_no +
        '" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-heading' + chapter_no +
        '"><div class="accordion-body p-xl-5"><div class="row g-3 mb-4"><div class="col-md-7"><div class="d-md-flex align-items-center"><label for="QuiName2" class="col-md-3 mb-2 mb-md-0">Chapter Title</label><input type="text" class="form-control" id="chapter_title_' +
        chapter_no + '" name="chapter_title"><input type="hidden" id="chapter_id_' + chapter_no +
        '"></div></div><div class="col-auto"><button class="btn btn-dark-cerulean" onclick="save_chapter(' +
        chapter_no +
        ')"><i class="far fa-save me-2"></i>Save</button></div><div class="col-auto ms-auto"><span class="input-group-text btn-danger py-2" onclick="remove_chapter(' +
        chapter_no +
        ')"><i class="far fa-trash-alt"></i></span></div></div><div id="lessoncontent_' +
        chapter_no +
        '"></div><div class="wrapper"><div class="buttons mb-4"><button class="clone btn btn-dark-cerulean mb-1 me-1" onclick="add_lesson(' +
        chapter_no +
        ')"><i class="fas fa-plus me-2"></i>Lesson</button><button class="clone btn btn-dark-cerulean mb-1 me-1" onclick="add_newquiz(' +
        chapter_no +
        ')"><i class="fas fa-plus me-2"></i>Quiz</button><button class="clone btn btn-dark-cerulean mb-1 me-1" onclick="add_newproject(' +
        chapter_no +
        ')"><i class="fas fa-plus me-2"></i>Project/Assignment</button></div></div></div></div></div>';
    $("#accordionClass").append(chaptercontent);
    chapter_no++;
}

var quiz_no = 1;
var quiz_order =1
function add_newquiz(sl) {
    var testcount=$("#lessoncontent_"+sl+">.quizstart").length;
   if(testcount){
        quiz_order=testcount+1; 
    }else{
        quiz_order = 1;
    }
    var quiz_content = '<div class="accordion-item mb-4 border-top quizstart" id="quizdiv' + sl + '_' + quiz_no +
        '"><h2 class="accordion-header" id="panelsStayOpen-heading' + sl + '_' + quiz_no +
        '"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse' +
        sl + '_' + quiz_no + '" aria-expanded="false" aria-controls="panelsStayOpen-collapse' + sl + '_' + quiz_no +
        '">Quiz :<span id="quiz_label_' +
        sl + '_' + quiz_no + '"></span></button></h2><div id="panelsStayOpen-collapse' + sl + '_' + quiz_no +
        '" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-heading' + sl + '_' + quiz_no +
        '"><div class="accordion-body p-3 p-xl-5"><div class="p-3 p-xl-5 border mb-4 position-relative"><div class="row g-3 mb-3"><div class="col-md-7"><div class="d-md-flex align-items-center"><label for="quiz_name_' +
        sl + quiz_no +
        '" class="col-md-3 mb-2 mb-md-0">Quiz-Title <span class="text-danger">*</span></label><input type="text" class="form-control" id="quiz_name_' +
        sl + quiz_no + '"><input type="hidden" id="quiz_id_' + sl + '_' + quiz_no +
        '"></div></div><div class="col-auto ms-auto"><button type="button" class="btn btn-danger" onclick="remove_quiz(' +
        sl + ',' + quiz_no +
        ')"><i class="far fa-trash-alt"></i></button></div></div><div class="mb-3"><label for="lessonDescription2" class="form-label">Description</label><textarea class="form-control" id="quiz_description_' +
        sl + '" rows="3"></textarea></div><div class="mb-3 row"><label for="pass_scrore_' + sl + quiz_no +
        '" class="col-md-2 col-form-label">Pass Score <span class="text-danger">*</span></label><div class="col-md-10"><input type="number" class="form-control valid_number" id="pass_scrore_' +
        sl + quiz_no +
        '"></div></div><div class="mb-5 d-md-flex justify-content-between"><div class="form-check form-switch mb-3 mb-lg-0"></div><div class="d-md-flex"><div class="me-3 mb-3 mb-lg-0"></div><div class="form-check form-check-inline"></div><div class=""><button type="button" class="btn btn-primary sticky" onclick="addQuestionsection(' +
        sl + ',' + quiz_no + ')" style="position: static; top: 0px; z-index: 1; right: 112px;">Add New Question</button></div></div></div><div id="questionSection_' + sl + '_' +
        quiz_no + '"><div class="mb-3"><div class="questionSection_' + sl + '_' + quiz_no +
        '" id="individual_question_' + sl + '_' + quiz_no + '_1"><div class="text-center"><h4>Question No ' + quiz_no +
        '</h4></div><div ><div class="row justify-content-between"><div class="form-group col-sm-6"><label for="question_type" class="col-sm-5">Question Type <i class="text-danger"> * </i></label><div class="col-sm-9"><select class="form-control" name="question_type' +
        sl + quiz_no + '[]" id="question_type_'+sl+'_'+quiz_no+'_1" onchange="loadquestiondata(this.value,' + sl + ',' + quiz_no + ',' + 1 +
        ')" required><option value="">-- select one --</option><option value="1">True/False</option><option value="2">Multiple Answers</option><option value="3">Short Answer</option></select></div></div><div class="form-group col-sm-2 "><label for="question_mark" class="col-sm-4">&nbsp</label><div class="col-sm-12 text-end"><button id="" class="btn btn-sm btn-danger" name="" onclick="remove_question(' +
        sl + ',' + quiz_no +
        ',1)" type="button" style="margin: 0px 15px 15px;">Delete</button></div></div></div><div class="row"><div class="form-group col-sm-12"><label for="question" class="col-sm-4">Question <i class="text-danger"> * </i></label><div class="col-sm-12"><textarea name="question' +
        sl + quiz_no +
        '[]" id="question" class="form-control" rows="5" cols="80" required></textarea><input type="hidden" id="question_id_' +
        sl + '_' + quiz_no + '_1" name="question_id' + sl + quiz_no +
        '[]"><input type="hidden" id="qst_editor" value="1"><input type="hidden" id="qst_count_' + sl + '_' + quiz_no +
        '" value="' + sl + '_' + quiz_no + '"></div></div></div><div class="row"><div class="loaddata_' + sl + '_' +
        quiz_no + '_' + 1 +
        ' col-sm-12 w-100p"></div></div><hr><div class="mb-3 row"><label for="correctAnsExplan" class="col-md-3 col-form-label">Correct Answer Explanation</label><div class="col-md-9"><input type="text" class="form-control" id="correctAnsExplan_id_' +
        sl + '_' + quiz_no + '_' + 1 + '" name="correctansexp' + sl + quiz_no +
        '[]"></div></div><div class="mb-3 row"><label for="QuestionMarks" class="col-md-3 col-form-label">Question Marks <span class="text-danger">*</span></label><div class="col-md-4"><input type="number" class="form-control valid_number" id="QuestionMarks" name="question_mark' +
        sl + quiz_no +
        '[]"  value=""></div></div></div></div></div><br></div><div class="text-end"><input type="hidden" id="quiz_order_' + sl + '_' + quiz_order +'" value="'+quiz_order+'"><button class="btn btn-dark-cerulean" onclick="save_quiz(' +
        sl + ',' + quiz_no +','+quiz_order+')">Save</button></div></div></div></div></div>';

        // lesson duration section after description 
        // <div class="mb-3 row"><label for="quiz_duration_' + sl + quiz_no +'" class="col-md-2 col-form-label">Duration</label><div class="col-md-10"><input type="text" class="form-control" id="quiz_duration_' +sl + quiz_no + '"></div></div>
    $("#lessoncontent_" + sl).append(quiz_content);
    quiz_no++;
    quiz_order++;
}

var project_no = 1;
var project_order = 1;
function add_newproject(sl) {
    var testcount=$("#lessoncontent_"+sl+">.projectstart").length;
   if(testcount){
        project_order=testcount+1; 
    }else{
        project_order = 1;
    }

    var projectcontent = '<div class="accordion-item mb-4 border-top projectstart" id="projectdiv' + sl + '_' + project_no +
        '"><h2 class="accordion-header" id="panelsStayOpen-heading' + sl + '_' + project_no +
        '"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseproject' +
        sl + '_' + project_no + '" aria-expanded="false" aria-controls="panelsStayOpen-collapseproject' + sl + '_' +
        project_no + '"> Project :<span id="projectlabel'+ sl +'_'+project_no+'"></span></button></h2><div id="panelsStayOpen-collapseproject' + sl + '_' + project_no +
        '" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-heading' + sl + '_' + project_no +
        '"><div class="accordion-body p-4 position-relative"><div class="row mb-4"><div class="col-md-8"><div class="d-md-flex align-items-center mt-3 mt-md-0"></div></div></div><div class="position-absolute end-1 top-1" onclick="remove_project(' +
        sl + ',' + project_no +
        ')"><span class="input-group-text p-2 btn-danger"><i class="far fa-trash-alt"></i></span></div><div class="mb-3"><div class="row"><label for="project_title" class="col-2">Project Title <span class="text-danger">*</span></label><div class="col-4"><input type="hidden" class="form-control" id="assign_id_' +
        sl + '_' + project_no + '" name="assign_id' + sl + project_no +
        '"><input type="text" class="form-control" id="project_title_' + sl + '_' + project_no +
        '" name="project_title' + sl + project_no +
        '"></div></div></div><div class="mb-3"><div class="row"><label for="categoryProject" class="col-2">Category <span class="text-danger">*</span></label><div class="col-4"><select class="form-select" id="categoryProject_' +
        sl + '_' + project_no + '" onchange="prject_category(this.value,' + sl + ',' + project_no +
        ')" name="project_category' + sl + project_no +
        '"><option value="">Select Category</option><option value="1">Chapter Project</option><option value="2">Final Project</option></select></div><div class="row mt-3" id="project_chapter_list_' +
        sl + '_' + project_no +
        '"></div></div></div><div class="mb-3"><textarea class="form-control" id="projectDescription_' + sl + '_' +
        project_no + '" name="projectDescription' + sl + project_no +
        '" rows="5" placeholder="Assignment Project Description"></textarea></div><div class="mb-3 row"><label for="passScore2" class="col-md-2 col-form-label">Pass Score <span class="text-danger">*</span></label><div class="col-md-8"><input type="text" class="form-control valid_number" id="passScore_' +
        sl + '_' + project_no + '" name="passScroe' + sl + project_no +
        '"></div></div><div class="mb-3 row"><label for="QuestionMarks2" class="col-md-2 col-form-label">Project Marks</label><div class="col-md-8"><input type="text" class="form-control valid_number" id="project_marks_' +
        sl + '_' + project_no + '" value="" name="projectmarkes' + sl + project_no +
        '"></div></div><table class="table table-bordered" id="project_marks_distribution_tbl_' + sl + '_' +
        project_no +
        '"><thead class="bg-dark-cerulean text-light"><tr><th class="text-center">Marking Base</th><th class="text-center">Mark Distribution</th><th class="text-center">Action</th></tr></thead><tbody id="markdistribute_tbl_body_' +
        sl + '_' + project_no + '"><tr><td><input type="text" class="form-control" id="distribute_title_' + sl + '_' +
        project_no + '_1" name="distribute_title' + sl + project_no +
        '[]"></td><td class="text-center"><input type="number" class="form-control text-end distribut_number_' + sl +
        '_' + project_no + '" onkeyup="marks_calculation(' + sl + ',' + project_no +
        ',1)" onchange="marks_calculation(' + sl + ',' + project_no + ',1)" name="distribute_mark' + sl + project_no +
        '[]" id="distribute_mark_' + sl + '_' + project_no +
        '_1"></td><td class="text-center"><button class="btn btn-success" onclick="project_marks_fild(' + sl + ',' +
        project_no +
        ')"><i class="fas fa-plus"></i></button></td></tr></tbody><tfoot><tr><td class="text-end"><b>Total</b></td><td class="text-end" id="sum_total_marks_' +
        sl + '_' + project_no +
        '">0.00</td></tr></tfoot></table><div class="mb-3"><textarea class="form-control" name="projectTips' + sl +
        project_no + '" id="tipsDesc_' + sl + '_' + project_no +
        '" rows="5" placeholder="Tips"></textarea></div><div class="mb-3 row"><label for="bitRefer" class="col-sm-2 col-form-label">Reference</label><div class="col-sm-10"><textarea class="form-control" rows="5" id="projectRefer_' +
        sl + '_' + project_no + '" name="projectreference' + sl + project_no +
        '"></textarea></div></div><div class="text-end"><input type="hidden" id="project_order_' + sl + '_' + project_order +'" value="'+project_order+'"><button class="btn btn-dark-cerulean" onclick="save_projects(' +
        sl + ',' + project_no + ','+project_order+')">Save</button></div></div></div></div>';
    $("#lessoncontent_" + sl).append(projectcontent);
    project_no++;
    project_order++;
}

function remove_quiz(sl, qz) {

    var quiz_id = $("#quiz_id_" + sl + "_" + qz).val();
    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var csrf_test_name = $('[name="csrf_test_name"]').val();

    var r = confirm("Do you want to delete?");
    if (r == true) {
        if (quiz_id != '') {
            $.ajax({
                url: base_url + "/instructor-delete-quiz",
                type: "POST",
                data: {
                    csrf_test_name: csrf_test_name,
                    quiz_id: quiz_id
                },
                success: function(r) {
                    var div = document.getElementById("quizdiv" + sl + "_" + qz);
                    div.parentNode.removeChild(div);
                    toastr["success"](r);
                }
            });
        } else {

            var div = document.getElementById("quizdiv" + sl + "_" + qz);
            div.parentNode.removeChild(div);
        }


    }
}

function remove_chapter(sl) {

    var chapter_id = $("#chapter_id_" + sl).val();
    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var csrf_test_name = $('[name="csrf_test_name"]').val();

    var r = confirm("Do you want to delete?");
    if (r == true) {
        if (chapter_id != '') {
            $.ajax({
                url: base_url + "/instructor-delete-chapter",
                type: "POST",
                data: {
                    csrf_test_name: csrf_test_name,
                    chapter_id: chapter_id
                },
                success: function(r) {
                    var div = document.getElementById("chapter_div_" + sl);
                    div.parentNode.removeChild(div);
                    toastr["success"](r);
                }
            });
        } else {
                var chapterRemove=$("#accordionClass > div.accordion-item").length;
                    // alert(chapterRemove);
                    if(sl==(chapterRemove+1) || chapterRemove==1 ){
                        return true;
                    }else{
                        var div = document.getElementById("chapter_div_" + sl);
                        div.parentNode.removeChild(div);
                        var k=sl;
                        // alert(k);
                        for(k=sl+1; k<=chapterRemove; k++){
                            $("#accordionClass > div.accordion-item#chapter_div_"+k).attr({id:"chapter_div_"+sl+""});
                            $("#accordionClass > div.accordion-item#chapter_div_"+k+".accordion-body.row.col-auto.input-group-text").attr({onclick:"remove_chapter("+sl+")"});
                            sl++;  
                            // .accordion-body .row.col-auto.input-group-text
                        }
                    }
        }


    }
}


function remove_project(sl, pz) {
    var project_id = $('[name="assign_id' + sl + pz + '"]').val();
    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    var r = confirm("Do you want to delete?");
    if (r == true) {
        if (project_id != '') {
            $.ajax({
                url: base_url + "/instructor-delete-project",
                type: "POST",
                data: {
                    csrf_test_name: csrf_test_name,
                    project_id: project_id
                },
                success: function(r) {
                    var div = document.getElementById("projectdiv" + sl + "_" + pz);
                    div.parentNode.removeChild(div);
                    toastr["success"](r);
                }
            });
        } else {

            var div = document.getElementById("projectdiv" + sl + "_" + pz);
            div.parentNode.removeChild(div);
        }


    }
}

function save_chapter(sl) {
    var chapter_name = $("#chapter_title_" + sl).val();
    if (chapter_name == '') {
        toastr["error"]('Please chapter title is required');
        return false;
    }
    var chapter_id = $("#chapter_id_" + sl).val();
    var course_id = $("#course_id").val();
    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    $.ajax({
        url: base_url + "/instructor-add-chapter",
        type: "POST",
        data: {
            csrf_test_name: csrf_test_name,
            chapter_name: chapter_name,
            chapter_id: chapter_id,
            course_id: course_id,

        },
        success: function(r) {
            var obj = jQuery.parseJSON(r);

            $("#chapter_id_" + sl).val(obj.chapter_id);
            $("#sectionlabel_" + sl).text(chapter_name);
            toastr["success"](obj.message);
        }
    });

}
function save_lesson(sl, count,lesson_order) {
    var chapter_id = $("#chapter_id_" + sl).val();
    var course_id = $("#course_id").val();
    var lesson_id = $("#lesson_id_" + sl + '_' + count).val();
    var lesson_name = $("#lesson_name_" + sl + '_' + count).val();
    var lesson_order = $("#lesson_order_" + sl + '_' + lesson_order).val();
    var lesson_desc = $("#lessonDescription_" + sl + '_' + count).val();
    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var csrf_test_name = $('[name="csrf_test_name"]').val();


    if (chapter_id == '') {
        toastr["error"]('Please Add Chapter First');
        return false;
    }
    if (lesson_name == '') {
        toastr["error"]('Lesson Name is required');
        return false;
    }
    var lesson_type=  $("#lesson_type_" + sl + '_' + count).val()
    if (lesson_type == '') {
        toastr["error"]('Lesson type is required');
        return false;
    }


    var fd = new FormData();
    // var attach= $("#attachment_" + sl + '_' + count).val().split('.').pop().toLowerCase();
    // if($.inArray(attach, ['']) != -1) {
    //     toastrErrorMsg("Attachment is Required ");
    //     return false;
    // }
   
    
    if(lesson_type ==3){
        var sss = document.getElementById("attachment_"+sl+'_'+count).files.length;
        for (var index = 0; index < sss; index++) {
            // var dd =document.getElementById("attachment_"+sl+'_'+count).files[index];
            fd.append("attachment[]", document.getElementById("attachment_"+sl+'_'+count).files[index]);
        }
   }else{
        if ($("#attachment_" + sl + '_' + count).length > 0) {
            fd.append("attachment", $("#attachment_" + sl + '_' + count)[0].files[0]);
        }
   }


    // alert($("#lesson_id_" + sl + '_' + count).val());

    fd.append("lesson_name", $("#lesson_name_" + sl + '_' + count).val());
    fd.append("is_savelesson", 1);
    fd.append("lesson_id", $("#lesson_id_" + sl + '_' + count).val());
    fd.append("lesson_type", $("#lesson_type_" + sl + '_' + count).val());
    fd.append("chapter_id", $("#chapter_id_" + sl).val());
    fd.append("course_id", $("#course_id").val());
    fd.append("lesson_desc", $("#lessonDescription_" + sl + '_' + count).val());
    if ($("#provider_url_" + sl + '_' + count).length > 0) {
        fd.append("provider_url", $("#provider_url_" + sl + '_' + count).val());
    }
    fd.append("duration", $("#duration_" + sl + '_' + count).val());
    fd.append("lesson_provider", $("#lesson_provider_" + sl + '_' + count).val());
    fd.append("is_preview", $("#is_preview_" + sl + '_' + count).val());
    fd.append("lesson_order",lesson_order);

 
    var dfile = $('input[name="downloadable_file_lesson_'+sl+'_'+count+'[]"]');
    for (var i = 0; i < dfile.length; i++) {
        var ids = i + 1;
        var tagid = dfile[i].getAttribute('id');
        fd.append("downloadable_file_lesson[]", $("#" + tagid)[0].files[0]);
    }
    fd.append("totalfile", dfile.length);
    fd.append("csrf_test_name", csrf_test_name);
    $("#save_lesson_btn_"+sl+'_'+count).prop('disabled', true);
    $.ajax({
        url: base_url + "/instructor-add-lesson",
        type: "POST",
        data: fd,
        enctype: "multipart/form-data",
        processData: false,
        contentType: false,
        success: function(r) {
            // console.log(r);
            var obj = jQuery.parseJSON(r);
            var obj = jQuery.parseJSON(r);
            var d = $('input[name="resourcesfiles_' + sl + '_' + count + '[]"]');
            for (var i = 0; i < d.length; i++) {
                var tagid = d[i].getAttribute('id');
                var newres_id= obj.resourse_id[i];
                $("#"+tagid).attr('value',newres_id);
            }
            $("#lesson_id_" + sl + '_' + count).val(obj.lesson_id);
            $("#save_lesson_btn_"+sl+'_'+count).prop('disabled', false);
            toastr["success"](obj.message);
            $('[aria-controls="lessondivopen' + sl + '_' + count + '"]').attr("aria-expanded", false);
            $('[aria-controls="lessondivopen' + sl + '_' + count + '"]').addClass('collapsed');
            $("#lessondivopen" + sl + '_' + count).removeClass('show');
            $("#lessonlabel" + sl + '_' + count).text(' : (' + lesson_name + ')');

            // $(".progress-bar_" + sl + '_' + count).css({'display' : 'none'});
            // $("#attachment_" + sl+'_'+count).val("");
            
            // $(".resourse_progress").val("");
            // $(".progress").css({'display' : 'none'});
        }
    });
}


//========= its for load question data ============
("use strict");

function loadquestiondata(questiontype, sl, qn, div) {
    if (questiontype == 1) {
        var item = "'addrowItem_" + sl + '_' + qn + "'";
        var isAnscount = "'1_" + sl + "'";
        var qst_count = $("#qst_count_" + sl + '_' + qn).val();

        $(".loaddata_" + sl + '_' + qn + '_' + div).html(
            '<div class="table-responsive">\n\
                            <table class="table table-bordered" id="quesOptionTable' + sl + '_' + qn + '_' + div + '">\n\
                                <thead>\n\
                                <tr>\n\
                                <th width="50%" class="text-center">Option</th>\n\
                                <th width="30%" class="text-center">Is Answer</th>\n\
                                </tr>\n\
                                </thead>\n\
                                <tbody id="addrowItem_' + sl + '_' + qn + '_' + div + '">\n\
                                <tr>\n\
                                <td class="text-right">\n\
                                <div class="">\n\
    <textarea name="question_option' + sl + qn + div + '[]" class="form-control option_editor" id="option_editor" readonly>True</textarea>\n\
    </div>\n\
    </td>\n\
    <td class="text-center">\n\
    <div class="offset-2 checkbox-success">\n\
    <input id="is_answer_' + sl + qn + div + '1" name="question_is_answer' + sl + qn + div +
            '[]"  type="radio" value="0" onclick="isAnswerRadio(' + sl + ',' + qn + ',' + div + ',' + 1 + ')">\n\
    <label for="is_answer_' + sl + qn + div + '1">Is Answer</label></div>\n\
    <input type="hidden" name="question_' +
            qst_count +
            '_hdn_isans[]" value="0" id="hdn_isans_' +
            sl +
            '_1"></td>\n\
    </tr>\n\
    </tbody>\n\
    <tbody id="addrowItem_' + sl + '_' + qn + '_' + div + '">\n\
    <tr>\n\
    <td class="text-right">\n\
    <div class="">\n\
    <textarea name="question_option' + sl + qn + div + '[]" class="form-control option_editor" id="option_editor" readonly>False</textarea>\n\
    </div>\n\
    </td>\n\
    <td class="text-center">\n\
    <div class="offset-2  checkbox-success">\n\
    <input id="is_answer_' + sl + qn + div + '2" name="question_is_answer' + sl + qn + div +
            '[]"  type="radio" value="0" onclick="isAnswerRadio(' + sl + ',' + qn + ',' + div + ',' + 2 + ')">\n\
    <label for="is_answer_' + sl + qn + div + '2">Is Answer</label></div>\n\
    <input type="hidden" name="question_' +
            qst_count +
            '_hdn_isans[]" value="0" id="hdn_isans_' +
            sl +
            '_1"></td>\n\
    </tr>\n\
    </tbody>\n\
    <tbody id="addrowItem_' + sl + '_' + qn + '_' + div + '">\n\
    <tr>\n\
    <td class="text-right">\n\
    <div class="">\n\
    <textarea name="question_option' + sl + qn + div + '[]" class="form-control option_editor" id="option_editor" readonly>Not Given</textarea>\n\
    </div>\n\
    </td>\n\
    <td class="text-center">\n\
    <div class="offset-2  checkbox-success">\n\
    <input id="is_answer_' + sl + qn + div + '3" name="question_is_answer' + sl + qn + div +
            '[]"  type="radio" value="0" onclick="isAnswerRadio(' + sl + ',' + qn + ',' + div + ',' + 3 + ')">\n\
    <label for="is_answer_' + sl + qn + div + '3">Is Answer</label></div>\n\
    <input type="hidden" name="question_' +
            qst_count +
            '_hdn_isans[]" value="0" id="hdn_isans_' +
            sl +
            '_1"></td>\n\
    </tr>\n\
    </tbody>\n\
    </table>\n\
    </div>'
        );

    }else if(questiontype == 2){
        var item = "'addrowItem_" + sl + '_' + qn + "'";
        var isAnscount = "'1_" + sl + "'";
        var qst_count = $("#qst_count_" + sl + '_' + qn).val();

        $(".loaddata_" + sl + '_' + qn + '_' + div).html(
            '<div class="table-responsive">\n\
                            <table class="table table-bordered" id="quesOptionTable' + sl + '_' + qn + '_' + div + '">\n\
                                <thead>\n\
                                <tr>\n\
                                <th width="50%" class="text-center">Option</th>\n\
                                <th width="30%" class="text-center">Is Answer</th>\n\
                                <th width="10%" class="text-center">Action </th>\n\
                                </tr>\n\
                                </thead>\n\
                                <tbody id="addrowItem_' + sl + '_' + qn + '_' + div + '">\n\
                                <tr>\n\
                                <td class="text-right">\n\
                                <div class="">\n\
    <textarea name="question_option' + sl + qn + div + '[]" class="form-control option_editor" id="option_editor"></textarea>\n\
    </div>\n\
    </td>\n\
    <td class="text-center">\n\
    <div class="offset-2 checkbox checkbox-success">\n\
    <input id="is_answer_' + sl + qn + div + '1" name="question_is_answer' + sl + qn + div +
            '[]"  type="checkbox" value="0" onclick="isAnswer(' + sl + ',' + qn + ',' + div + ',' + 1 + ')">\n\
    <label for="is_answer_' +
            sl +
            '_1">Is Answer</label></div>\n\
    <input type="hidden" name="question_' +
            qst_count +
            '_hdn_isans[]" value="0" id="hdn_isans_' +
            sl +
            '_1"></td>\n\
            <td class="text-center">\n\
    <button id="add-invoice-item" class="btn btn-info btn-sm" name="add-new-item" onclick="addInputField(' + sl + "," +
            qn + "," + div + ')" type="button""><i class="fa fa-plus"></i>more</button>\n\
    </td>\n\
    </tr>\n\
    </tbody>\n\
    </table>\n\
    </div>'
        );
    }else if (questiontype == 3) {
        $(".loaddata_" + sl + '_' + qn + '_' + div).html(
            '<div class="form-group col-sm-12">\n\
                        <label for="shortanswer" class="col-sm-4">Short Answer</label>\n\
                        <div class="col-sm-12">\n\
                            <textarea name="shortanswer' + sl + qn + '[]" id="shortanswer_' + sl+'_'+ qn+'_'+div+'" class="form-control shortanswer" rows="5" cols="80" required></textarea>\n\
                        </div>\n\
                    </div>'
        );

    }
}

var count = 2;
var cnt = 1;
limits = 500;
// ========== its for row add dynamically =============
("use strict");

function addInputField(sl, qn, div) {
    if (count == limits) {
        alert("You have reached the limit of adding" + count + "inputs");
    } else {
        var trcount = $("#quesOptionTable" + sl + "_" + qn + "_" + div + " > tbody > tr").length + 1;
        var qst_count = $("#qst_count_" + sl + "_" + qn).val();

        var a = "option_text_" + count,
            e = document.createElement("tr");
        (e.innerHTML =
            "<td> <div id='" +
            a +
            "' class='" +
            count +
            "'>\n\
    <textarea name='question_option" + sl + qn + div + "[]' class='form-control option_editor' id='option_editor_" +
            count +
            "'></textarea></div></td>\n\
<td class='text-center'> <div class='offset-2 checkbox checkbox-success'><input id='is_answer_" + sl + qn + div +
            count + "' name='question_is_answer" + sl + qn + div + "[]'  type='checkbox' value='0' onclick='isAnswer(" +
            sl + "," + qn + "," + div + "," + count + ")'><label for='is_answer_" + sl +
            "_" +
            trcount +
            "'> Is Answer</label></div><input type='hidden' name='question_" +
            qst_count +
            "_hdn_isans[]' value='0' id='hdn_isans_" +
            sl +
            "_" +
            trcount +
            "'></td>\n\
<td class='text-center'><button style='text-align: right;' class='btn btn-sm btn-danger' type='button' onclick='deleteOption(this," +
            sl + "," + qn + "," + div + ")'><i class='fa fa-minus'> </i></button></td>\n\
"),
        document.getElementById('addrowItem_' + sl + '_' + qn + '_' + div).appendChild(e),
            document.getElementById(a).focus();

        count++, cnt++;
    }
}

("use strict");
var c = 1;

function addQuestionsection(sl, qn) {

    c++;
    var content =
        '<div id="individual_question_' + sl + '_' + qn + '_' + c + '"><div class="text-center"><h4>Question No ' + c +
        '</h4></div><div class="questionSection_' +
        c +
        '">\n\
    <div class="row justify-content-between">\n\
  <div class="form-group col-sm-6">\n\
      <label for="question_type" class="col-sm-5">Question Type <i class="text-danger"> * </i></label>\n\
      <div class="col-sm-9">\n\
          <select class="form-control" name="question_type' + sl + qn +
        '[]" id="question_type_' + sl + '_' + qn + '_' + c + '" onchange="loadquestiondata(this.value,' + sl + ',' + qn + ',' + c + ')" required>\n\
              <option value="">-- select one --</option>\n\
              <option value="1">True/False</option>\n\
              <option value="2">Multiple Answers</option>\n\
              <option value="3">Short Answer</option>\n\
          </select>\n\
      </div>\n\
  </div>\n\
 <div class="form-group col-sm-2">\n\
    <label for="question_mark" class="col-sm-4">&nbsp</label>\n\
    <div class="col-sm-12 text-end">\n\
        <button id="" class="btn btn-sm btn-danger" name="" onclick="remove_question(' + sl + ',' + qn + ',' + c + ')" type="button">Delete</button>\n\
    </div>\n\
</div>\n\
</div>\n\
<div class="row">\n\
  <div class="form-group col-sm-12">\n\
      <label for="question" class="col-sm-4">Question <i class="text-danger"> * </i></label>\n\
      <div class="col-sm-12">\n\
          <textarea name="question' + sl + qn + '[]" id="question" class="form-control" rows="5" cols="80" required></textarea>\n\
          <input type="hidden" id="qst_editor" value="1">\n\
          <input type="hidden" id="question_id_' + sl + '_' + qn + '_' + c + '" name="question_id' + sl + qn +
        '[]"><input type="hidden" id="qst_count_' +
        c +
        '" value="' +
        c +
        '">\n\
      </div>\n\
  </div>\n\
</div>\n\
<div class="row">\n\
  <div class="loaddata_' + sl + '_' + qn + '_' + c +
        '" col-sm-12 w-100p">\n\
  </div>\n\
</div><hr></div><div class="mb-3 row"><label for="correctAnsExplan" class="col-md-3 col-form-label">Correct Answer Explanation</label><div class="col-md-9"><input type="text" class="form-control" id="correctAnsExplan" name="correctansexp' +
        sl + qn +
        '[]"></div></div><div class="mb-3 row"><label for="QuestionMarks" class="col-md-3 col-form-label">Question Marks <i class="text-danger"> * </i></label><div class="col-md-4"><input type="number" class="form-control" id="QuestionMarks" value="" name="question_mark' +
        sl + qn + '[]"></div></div></div><br>';
    $("#questionSection_" + sl + '_' + qn).append(content);
    $(".placeholder-single").select2();
}


("use strict");

function lessontype(typeid, sl, lesson) {
    if (typeid == 1) {
        $(".lessontype_status_" + sl + "_" + lesson).attr("value", "video");
        $("#lessonshow_" + sl + "_" + lesson).html(
            "<input type='hidden' id='lesson_provider_" + sl + "_" +
            lesson + "' value='2'  accept='image/*'>"
        );
        // $("#lessonshow_" + sl + "_" + lesson).html(
        //     "<label for='lesson_provider' class='col-sm-3 col-form-label'>Lesson Provider</label>\n\
        //     <div class='col-sm-8'>\n\
        //     <input type='lesson_provider' id='lesson_provider_" + sl + "_" +
        //     lesson + "' value='2'>\n\
        // 	<select name='lesson_provider' class='form-control placeholder-single' id='lesson_provider_" + sl + "_" +
        //     lesson + "' onchange='lessonprovider(this.value," + sl + "," + lesson + ")'>\n\
        //     <option value=''>-- select one --</option>\n\
        //     <option value='2'>Vimeo</option>\n\
        //     </select> \n\
        //     </div>"
        // );
        $("#providershow_" + sl + "_" + lesson).html(
            "<div class='form-group row'>\n\
            <label for='providervideo_" + sl + "_" + lesson +
            "' class='col-sm-3 col-form-label'>Video <span class='text-danger'>*</span></label>\n\
            <div class='col-sm-9'>\n\
            <div class='d-flex'>\n\
            <input type='hidden' class='form-control' id='provider_url_" + sl + "_" + lesson +
            "' name='provider_url' placeholder='Provider URL'>\n\
            <input type='file' accept='video/*' class='form-control form-control form-control-lg mb-1' id='providervideo_" + sl + "_" + lesson +
            "' name='providervideo' onchange='lessonhandleFileSelect(this," + sl + "," + lesson + ")'>\n\
            <div class='ms-2' id='video_delete_content_" + sl + "_" + lesson + "' style='display:none'>\n\
               <a class='btn btn-danger' href='javascript:void(0)' onclick='cancel_video(" + sl + "," + lesson + ")'>cancel</a>\n\
                </div></div>\n\
               <div id='progress-container_" + sl + "_" + lesson +
            "' class='progress mt-3' style='display:none'>\n\
            <div id='progress_" + sl + "_" + lesson +
            "' class='progress-bar progress-bar-info progress-bar-striped active' role='progressbar' aria-valuenow='46' aria-valuemin='0' aria-valuemax='100' style='width: 0%'>&nbsp;0%</div>\n\
        </div>\n\
            </div>\n\
			<div id='phppot-message'></div>\n\
            </div>\n\
            <div class='form-group row'>\n\
            <div class='col-sm-8'>\n\
            <input type='hidden' class='form-control' id='duration_" + sl + "_" + lesson + "' name='duration' placeholder='00:00:00 Follow this format'>\n\
            </div></div>\n\
            "
        );
    } else if (typeid == 3) {
        $(".lessontype_status_" + sl + "_" + lesson).attr("value", "attach");
        $("#lessonshow_" + sl + "_" + lesson).html(
            "<label for='attachment' class='col-sm-3 col-form-label'>Attachment <span class='text-danger'>*</span></label>\n\
            <div class='col-sm-8'>\n\
               <input type='file' name='attachment[]' onchange='fileuploaderprogress(" + sl + "," + lesson + ",1)' id='attachment_" + sl + "_" + lesson + "' class='custom-input-file form-control form-control-lg mb-1' accept='image/*' multiple> \n\
               <div class='progress-bar_"+sl+"_"+lesson+"'></div>\n\
            </div> \n\
            "
        );
        $("#providershow_" + sl + "_" + lesson).html("");
    } else if (typeid == 2  || typeid == 4 || typeid == 5) {
        $(".lessontype_status_" + sl + "_" + lesson).attr("value", "attach");
        $("#lessonshow_" + sl + "_" + lesson).html(
            "<label for='attachment' class='col-sm-3 col-form-label'>Attachment <span class='text-danger'>*</span></label>\n\
            <div class='col-sm-8'>\n\
               <input type='file' name='attachment' onchange='fileuploaderprogress(" + sl + "," + lesson + ",1)' id='attachment_" + sl + "_" + lesson + "' class='custom-input-file form-control form-control-lg mb-1'> \n\
               <div class='progress-bar_"+sl+"_"+lesson+"'></div>\n\
            </div> \n\
            "
        );
        $("#providershow_" + sl + "_" + lesson).html("");
    }
}
$(document).ready(function() {
    $(".preloader_cls").hide();




});

function convertHMS(sl, lesson, value) {
    const sec = parseInt(value, 10); // convert value to number if it's string
    let hours = Math.floor(sec / 3600); // get hours
    let minutes = Math.floor((sec - (hours * 3600)) / 60); // get minutes
    let seconds = sec - (hours * 3600) - (minutes * 60); //  get seconds
    // add 0 if value < 10; Example: 2 => 02
    if (hours < 10) {
        hours = "0" + hours;
    }
    if (minutes < 10) {
        minutes = "0" + minutes;
    }
    if (seconds < 10) {
        seconds = "0" + seconds;
    }
    let convertime = hours + ':' + minutes + ':' + seconds; // Return is HH : MM : SS
    $('#duration_' + sl + '_' + lesson).val(convertime);
}

"use strict";

function get_providervideo(control, sl, lesson) {
    var fd = new FormData();
    $("#perloader_" + sl + "_" + lesson).show();
    $(".nxtpreviousbtn").hide();
    $("#lessonsavebtn_" + sl + "_" + lesson).hide();
    var CSRF_TOKEN = $("#CSRF_TOKEN").val();
    var url = $("#base_urlrm").val();
    fd.append("video_file", $("#providervideo_" + sl + "_" + lesson)[0].files[0]);
    fd.append('csrf_test_name', (CSRF_TOKEN));


    // ============= its for get duration from video file upload start ============
    var video = document.createElement('video');
    video.preload = 'metadata';
    video.onloadedmetadata = function() {
        window.URL.revokeObjectURL(video.src);
        // alert("Duration : " + video.duration + " seconds");
        convertHMS(sl, lesson, video.duration)
    }
    video.src = URL.createObjectURL(control.files[0]);
    // ============= its for get duration from video file upload close ============

    // return false;




    $.ajax({
        url: url + "/instructor-course-videoupload",
        type: "POST",
        dataType: 'json',
        data: fd,
        contentType: false,
        processData: false,
        success: function(data) {
            if (data.type == "error") {
                $(".nxtpreviousbtn").show();
                $("#lessonsavebtn_" + sl + "_" + lesson).show();
                $("#perloader_" + sl + "_" + lesson).hide();
                $("#phppot-message").addClass("error");
                $("#phppot-message").text(data.error_message);
                toastr.success(data.error_message);
            } else if (data.type == "success") {
                $(".nxtpreviousbtn").show();
                $("#lessonsavebtn_" + sl + "_" + lesson).show();
                $("#perloader_" + sl + "_" + lesson).hide();
                toastr.success("Lesson video uploaded successfully");


                let str = data.link;
                myArr = str.split("/");
                video_id = myArr[3];
                $('#provider_url_' + sl + "_" + lesson).val(data.link);
            }
        }
    });
}

//    ============= its for lessonprovider =============
("use strict");

// function lessonprovider(provider_id, sl, lesson) {
//     if (provider_id == 1 || provider_id == 2) {
//         $("#providershow_" + sl + "_" + lesson).html(
//             "<div class='form-group row'>\n\
//             <label for='provider_url' class='col-sm-3 col-form-label'>Provider URL</label>\n\
//             <div class='col-sm-8'>\n\
//             <input type='text' class='form-control' id='provider_url_" + sl + "_" + lesson +
//             "' name='provider_url' placeholder='Provider URL' onkeyup='getvideo_details(this.value," + sl + "," +
//             lesson + ")'>\n\
//             </div>\n\
//             </div>\n\
//             <label class='offset-3 preloader_cls' id ='perloader_" + sl + "_" + lesson + "'><i class='fas fa-spinner fa-spin text-green'>&nbsp;</i>Checking Url</label>\n\
//             <label class='offset-3 invalidurl_cls' id = 'invalid_url_" + sl + "_" + lesson + "'>Invalid URL Your video link has to be  vimeo</label> <br>\n\
//             <div class='form-group row'>\n\
//             <label for='duration' class='col-sm-3 col-form-label'>Duration</label>\n\
//             <div class='col-sm-8'>\n\
//             <input type='text' class='form-control' id='duration_" + sl + "_" + lesson + "' name='duration' placeholder='00:00:00 Follow this format'>\n\
//             </div></div>\n\
//             "
//         );
//     }
// }

function remove_question(sl, qz, div) {
    var question_id = $("#question_id_" + sl + "_" + qz + "_" + div).val();
    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    // alert(sl);
    // alert(qz);
    // alert(div);

    var r = confirm("Do you want to delete?");
    if (r == true) {
        if (question_id != '') {
            $.ajax({
                url: base_url + "/instructor-delete-question",
                type: "POST",
                data: {
                    csrf_test_name: csrf_test_name,
                    question_id: question_id
                },
                success: function(r) {
                    var divs = document.getElementById("individual_question_" + sl + "_" + qz + "_" + div);
                    divs.parentNode.removeChild(divs);
                    toastr["success"](r);
                }
            });
        } else {

            var div = document.getElementById("individual_question_" + sl + "_" + qz + "_" + div);
            div.parentNode.removeChild(div);
        }


    }
}
//    =========== its for getvideo_details ===========
("use strict");

function getvideo_details(video_url, sl, lesson) {
    var lesson_provider = $("#lesson_provider_" + sl + "_" + lesson).val();
    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    if (checkURLValidity(video_url)) {

        $("#perloader").show();
        $.ajax({
            url: base_url + "/get-video-details",
            type: "POST",
            data: {
                csrf_test_name: csrf_test_name,
                lesson_provider: lesson_provider,
                video_url: video_url,
            },
            success: function(r) {

                var res = $.parseJSON(r);
                $("#duration_" + sl + "_" + lesson).val(res.duration);
                $("#perloader_" + sl + "_" + lesson).hide();
                $("#invalid_url_" + sl + "_" + lesson).hide();
            },
        });
    } else {
        $("#invalid_url_" + sl + "_" + lesson).show();
        $("#perloader_" + sl + "_" + lesson).hide();
        $("#duration_" + sl + "_" + lesson).val("");
    }
}

("use strict");

function checkURLValidity(video_url) {
    var youtubePregMatch =
        /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;
    var vimeoPregMatch =
        /^(http\:\/\/|https\:\/\/)?(www\.)?(vimeo\.com\/)([0-9]+)$/;
    if (video_url.match(youtubePregMatch)) {
        return true;
    } else if (vimeoPregMatch.test(video_url)) {
        return true;
    } else {
        return false;
    }
}


function save_quiz(sl, count,quiz_order) {
    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    var fd = new FormData();
    fd.append("chapter_id", $("#chapter_id_" + sl).val());
    fd.append("course_id", $("#course_id").val());
    fd.append("description", $("#quiz_description_" + sl).val());
    fd.append("quiz_id", $("#quiz_id_" + sl + "_" + count).val());
    fd.append("quiz_name", $("#quiz_name_" + sl + count).val());
    // fd.append("quiz_duration", $("#quiz_duration_" + sl + count).val());
    fd.append("pass_score", $("#pass_scrore_" + sl + count).val());
    
    // <input type="text" id="quiz_order_' + sl + '_' + quiz_order +'" value="'+quiz_order+'">

    var check_digit = $("#pass_scrore_" + sl + count).val().length;
    var pass_scrore = $("#pass_scrore_" + sl + count).val();
    var quiz_name   = $("#quiz_name_" + sl + count).val(); 
    var quiz_order  =$("#quiz_order_" + sl + '_'+ quiz_order).val(); 
    var chapter_id= $("#chapter_id_" + sl).val();
    if (chapter_id == '') {
        toastr["error"]('Please Add Chapter First');
        return false;
    }
    if (quiz_name==""){
        toastr["error"]('Quiz title is required');
        return false;
    }
   if (pass_scrore==""){
     toastr["error"]('Pass score is required');
     return false;
  }

   if (check_digit >3){
     toastr["error"]('No pass scrore above 3 digit');
     return false;
  }


    //question_option
    var qtype = document.getElementsByName("question_type" + sl + count + "[]");
    for (var i = 0; i < qtype.length; i++) {
        var type = qtype[i];
        if(type.value ==""){
            toastr["error"]('Question type is required');
            return false;
        }else{
        fd.append("question_type[]", type.value);
        }
    }

    var questions = document.getElementsByName("question" + sl + count + "[]");
    var ques_id = document.getElementsByName("question_id" + sl + count + "[]");
    var error_count = 0;
    var anserror_count = 0;
    for (var i = 0; i < questions.length; i++) {
        var ques = questions[i];
        var que_id = ques_id[i];

        var qid = que_id.getAttribute("id");
        var question_count =  qid.split("_");
        var q_no = question_count[4];

        fd.append("question[]", ques.value);
        fd.append("question_id[]", que_id.value);
        var cn = q_no;
        var new_cn = i + 1;
        var qname = ques.value;
        var qname = qname.trim();
        var qname = qname.replace(" ", "_");
        var qoptions = document.getElementsByName("question_option" + sl + count + cn + "[]");
        var isanswer = document.getElementsByName("question_is_answer" + sl + count + cn + "[]");

      
        if(qname ==""){
            toastr["error"]('Question name required');
            return false;
        }
        
        
        var check_optionerror = 0;
        for (var j = 0; j < qoptions.length; j++) {
            var opt = qoptions[j];
            var ctype = $('#question_type_'+ sl +'_' + count+'_'+ cn).val();
            if(ctype == 1 || ctype == 2){
                if(opt.value !=''){
                    check_optionerror += 1;
                }
            }
            fd.append("question_option" + new_cn + "[]", opt.value);
        }
        error_count += (check_optionerror > 0?1:0);
        var ans_errorcount = 0;
        for (var k = 0; k < isanswer.length; k++) {

            var ans = isanswer[k];
            var ctype = $('#question_type_'+ sl +'_' + count+'_'+ cn).val();
            if(ctype == 1 || ctype == 2){
                if(ans.value !=0){
                    ans_errorcount += 1;
                }
            }
            fd.append("question_option_ans" + new_cn + "[]", ans.value);
        }
        anserror_count += (ans_errorcount > 0?1:0);
        var ctype = $('#question_type_'+ sl +'_' + count+'_'+ cn).val();
        if(ctype == 3){
            var short_q_ans = $("#shortanswer_"+ sl +'_' + count+'_'+ cn).val();
        fd.append("shortanswer[]", short_q_ans);
        }else{
            fd.append("shortanswer[]", '');   
        }

    }

    var shortanswer = document.getElementsByName("shortanswer" + sl + count + "[]");
    var shorterror=0;
      var shortques = 0;
    for (var i = 0; i < shortanswer.length; i++) {
        var shortans = shortanswer[i];
        var trimshortans = shortans.value.replace('"', " ");
            var shortansval = trimshortans.trim();
        // alert('short ans ' +  shortansval);
            if(shortansval !=''){
                shorterror += 1;
            }
            shortques += 1;
        // fd.append("shortanswer[]", shortans.value);
    }
    error_count += (shortques > 0?shortques:0);
    anserror_count += (shorterror > 0?shorterror:0);


    var question_exp_crans = document.getElementsByName("correctansexp" + sl + count + "[]");
    for (var i = 0; i < question_exp_crans.length; i++) {
        var quesexpl = question_exp_crans[i];
        fd.append("correctansexp[]", quesexpl.value);
    }


    var question_mark = document.getElementsByName("question_mark" + sl + count + "[]");
    for (var i = 0; i < question_mark.length; i++) {
        var qmarks = question_mark[i];
        if(qmarks.value == ""){
            toastr["error"]('Question mark is required');
             return false;
          }else{
            if (qmarks.value >99) {
                toastr["error"]('Question mark above 2 digit');
                return false;
            }
           fd.append("question_mark[]", qmarks.value);
          }
    }


    if(error_count < questions.length){
        toastr.error('Please check minimum one option');
        return false;
    }

    if(anserror_count < questions.length){
        toastr.error('Please check minimum one ans');
        return false;  
    }

    fd.append("quiz_order",quiz_order);
    fd.append("csrf_test_name", csrf_test_name);
    $.ajax({
        url: base_url + "/instructor-add-quiz",
        type: "POST",
        data: fd,
        enctype: "multipart/form-data",
        processData: false,
        contentType: false,
        success: function(r) {
            var res = $.parseJSON(r);
            toastr["success"](res.message);
            var qid = res.quiz_id;
            var quizid = qid.replace('"', " ");
            var quizid = quizid.trim();
            $("#quiz_id_" + sl + "_" + count).val(quizid);
            var ques_id = res.question_id;
            for (var i = 0; i < ques_id.length; i++) {
                var k = i + 1;
                $("#question_id_" + sl + "_" + count + "_" + k).val(ques_id[i]);

            }
            $("#quiz_label_" + sl + '_' + count).text($("#quiz_name_" + sl + count).val());

            $('[aria-controls="panelsStayOpen-collapse' + sl + '_' + count + '"]').attr("aria-expanded",
                false);
            $('[aria-controls="panelsStayOpen-collapse' + sl + '_' + count + '"]').addClass('collapsed');
            $("#panelsStayOpen-collapse" + sl + '_' + count).removeClass('show');
        }
    });
}


("use strict");

function isAnswer(sl, i, div, count) {
    if ($("#is_answer_" + sl + i + div + count).is(":checked")) {
        $("#is_answer_" + sl + i + div + count).val(1);
    } else {
        $("#is_answer_" + sl + i + div + count).val(0);
    }
}

function isAnswerRadio(sl, i, div, count) {
  if(count==1){
    $("#is_answer_" + sl + i + div + count).val(1);

    $("#is_answer_" + sl + i + div +"2").val(0);
    $("#is_answer_" + sl + i + div +"3").val(0);
  }else if(count==2){
    $("#is_answer_" + sl + i + div + count).val(1);

    $("#is_answer_" + sl + i + div +"1").val(0);
    $("#is_answer_" + sl + i + div +"3").val(0);
  }else{
    $("#is_answer_" + sl + i + div + count).val(1);


    $("#is_answer_" + sl + i + div +"1").val(0);
    $("#is_answer_" + sl + i + div +"2").val(0);
  }


}


("use strict");
d = 1;

function deleteOption(t, i, div, count) {
    d++;
    var a = $("#quesOptionTable" + i + "_" + div + "_" + count + " > tbody > tr").length;
    if (1 == a) {
        alert("There only one row you can't delete it.");
    } else {
        var e = t.parentNode.parentNode;
        e.parentNode.removeChild(e);
    }
}

function prject_category(id, sl, pro_no) {
    var course_id = $("#course_id").val();
    var chapter_id = $("#chapter_id_"+sl).val();

    var base_url = "<?php echo base_url(($enterprise_shortname?$enterprise_shortname:'admin'))?>";
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    if (id == 1) {
        $.ajax({
            url: base_url + "/get-course-chapterlist",
            type: "POST",
            data: {
                csrf_test_name: csrf_test_name,
                course_id: course_id,
                serial: sl,
                chapter_id: chapter_id,
                project_no: pro_no
            },
            success: function(r) {
                $("#project_chapter_list_" + sl + "_" + pro_no).html(r);
            },
        });
    } else {
        $("#project_chapter_list_" + sl + "_" + pro_no).html('');
    }

}

var mcount = 0;

function project_marks_fild(sl, pr) {
    // var trcount = $("#project_marks_distribution_tbl_" + sl + "_" + pr + "> tbody > tr").length + 1;
    var trcounts = $("#project_marks_distribution_tbl_" + sl + "_" + pr + "> tbody > tr").length;
        if(trcounts){
            mcount=trcounts+1; 
        }else{
            mcount = 1;
        }
        if (mcount >4){
            toastr["warning"]('You cannot add more than 4');
            return false;
        }
    var a = "distribute_title_" + sl + "_" + pr + "_" + mcount;
    var e = document.createElement("tr");
    e.innerHTML = '<td><input type="text" class="form-control" id="distribute_title_' + sl + '_' + pr + '_' + mcount +
        '" name="distribute_title' + sl + pr +
        '[]"></td><td class="text-center"><input type="number" class="form-control text-end distribut_number_' + sl +
        '_' + pr + '" name="distribute_mark' + sl + pr + '[]" onkeyup="marks_calculation(' + sl + ',' + pr + ',' +
        mcount + ')" onchange="marks_calculation(' + sl + ',' + pr + ',' + mcount + ')" id="distribute_mark_' + sl +
        '_' + pr + '_' + mcount +
        '"></td><td class="text-center"><button class="btn btn-danger" onclick="removeproject_marks_fild(this,' + sl +
        ',' + pr + ')"><i class="fas fa-minus"></i></button></td>';
    document.getElementById('markdistribute_tbl_body_' + sl + '_' + pr).appendChild(e);
    document.getElementById(a).focus();
    mcount++;
}


function removeproject_marks_fild(t, sl, pr) {
    var e = t.parentNode.parentNode;
    e.parentNode.removeChild(e);
    var gr_tot = 0;
    $(".distribut_number_" + sl + "_" + pr).each(function() {
        isNaN(this.value) || 0 == this.value.length || (gr_tot += parseFloat(this.value))
    });
    $("#sum_total_marks_" + sl + "_" + pr).text(gr_tot.toFixed(2, 2));
}

function marks_calculation(sl, pr, content) {
    var id = $(this).attr('id');
    var project_marks = $("#project_marks_" + sl + "_" + pr).val();
    if (project_marks == '') {
        toastr["error"]('Please Add Project Marks First');
        $("#distribute_mark_" + sl + "_" + pr + "_" + content).val(0);
        return false;
    }
    var gr_tot = 0;
    $(".distribut_number_" + sl + "_" + pr).each(function() {
        isNaN(this.value) || 0 == this.value.length || (gr_tot += parseFloat(this.value))
    });
    if (parseFloat(project_marks) < parseFloat(gr_tot)) {
        toastr["error"]('Distribution Marks Can not More than Project Marks');
        $("#distribute_mark_" + sl + "_" + pr + "_" + content).val(0);
        //return false;
    }

    var gr_tot = 0;
    $(".distribut_number_" + sl + "_" + pr).each(function() {
        isNaN(this.value) || 0 == this.value.length || (gr_tot += parseFloat(this.value))
    });
    $("#sum_total_marks_" + sl + "_" + pr).text(gr_tot.toFixed(2, 2));
}

function save_projects(sl, pno,project_order) {
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    var url = $("#base_urlrm").val();
    var chapter_id = $("#chapter_id_" + sl).val();
    if (chapter_id == '') {
        toastr["error"]('Please Add Chapter First');
        return false;
    }
 
    var project_title = $('[name="project_title' + sl + pno + '"]').val();
    var project_order = $("#project_order_" + sl + '_' + project_order).val();
    var project_category = $('[name="project_category' + sl + pno + '"]').val();
    var pass_score = $('[name="passScroe' + sl + pno + '"]').val();
    if (project_title == "") {
       toastr["error"]("Project Title name must be required");
       $('[name="project_title' + sl + pno + '"]').focus();
       return false;
   }

    if (project_category == "") {
        toastr["error"]("Project Category must be required");
        $('[name="project_category' + sl + pno + '"]').focus();
        return false;
    }

    if (pass_score == "") {
        toastr["error"]("Pass Score  must be required");
        $('[name="passScroe' + sl + pno + '"]').focus();
        return false;
    }
    var pfd = new FormData();
    pfd.append("project_title", $('[name="project_title' + sl + pno + '"]').val());
    pfd.append("project_category", $('[name="project_category' + sl + pno + '"]').val());
    pfd.append("assign_id", $('[name="assign_id' + sl + pno + '"]').val());
    pfd.append("course_id", $("#course_id").val());
    pfd.append("project_chapter", chapter_id);
    pfd.append("projectDescription", $('[name="projectDescription' + sl + pno + '"]').val());
    pfd.append("passScroe", $('[name="passScroe' + sl + pno + '"]').val());
    pfd.append("projectmarkes", $('[name="projectmarkes' + sl + pno + '"]').val());
    pfd.append("project_order",project_order);
    var ptitle = $('input[name="distribute_title' + sl + pno + '[]"]');
    for (var i = 0; i < ptitle.length; i++) {
        var title = ptitle[i];
        pfd.append("distribute_title[]", title.value);
    }

    var pmarks = $('input[name="distribute_mark' + sl + pno + '[]"]');
    for (var i = 0; i < pmarks.length; i++) {
        var marks = pmarks[i];
        pfd.append("distribute_mark[]", marks.value);
    }
    pfd.append("projectTips", $('[name="projectTips' + sl + pno + '"]').val());
    pfd.append("projectreference", $('[name="projectreference' + sl + pno + '"]').val());
    pfd.append("csrf_test_name", csrf_test_name);
    $.ajax({
        url: url + "/instructor-project-save",
        type: "POST",
        data: pfd,
        enctype: "multipart/form-data",
        processData: false,
        contentType: false,
        success: function(data) {
            var res = $.parseJSON(data);
            toastr["success"](res.message);
            var ass_id = res.assign_id;
            var assign_id = ass_id.replace('"', " ");
            var assign_id = assign_id.trim();
            $('[name="assign_id' + sl + pno + '"]').val(assign_id);
            $('[aria-controls="panelsStayOpen-collapseproject' + sl + '_' + pno + '"]').attr(
                "aria-expanded", false);
            $('[aria-controls="panelsStayOpen-collapseproject' + sl + '_' + pno + '"]').addClass(
                'collapsed');
            $("#panelsStayOpen-collapseproject" + sl + '_' + pno).removeClass('show');
            $("#projectlabel"+sl+'_'+pno).text(' (' + project_title + ')');

        },
        error: function(xhr) {
            alert('failed!');
        }
    });
}


$('#purchasePricing').on('click', function() {
    var check_subcribe = 0;
    var message = '';

    if ($('#freePricing').is(":checked")) {
        var check_subcribe = check_subcribe + 1;
        var message = 'you cannot select  purchase and free at a time!';
    }

    if (check_subcribe > 0) {

        toastr["error"](message);

        return false;
    } else {
        if ($('#purchasePricing').is(":checked")) {
            $('#purchasePricing').val(1);
            var stylec = '';
        } else {
            $('#purchasePricing').val('');
            var stylec = 'none';
        }
        $('#priceContent').css('display', stylec);
    }


});

$('#subscriptionPricing').on('click', function() {
    var check_purchase = 0;
    var message = '';
    if ($('#freePricing').is(":checked")) {
        var check_purchase = check_purchase + 1;
        var message = 'you cannot select  free and subscription at a time!';
    }
    if (check_purchase > 0) {
        toastr["error"](message);
        return false;
    } else {
        if ($('#subscriptionPricing').is(":checked")) {

            $('#subscriptionPricing').val(2);

        } else {
            $('#subscriptionPricing').val('');


        }
    }

});


$('#freePricing').on('click', function() {
    var check_purchase = 0;
    var message = '';
    if ($('#purchasePricing').is(":checked")) {
        var check_purchase = check_purchase + 1;
        var message = 'you cannot select purchase and free at a time!';
    }
    if ($('#subscriptionPricing').is(":checked")) {
        var check_purchase = check_purchase + 1;
        var message = 'you cannot select free and subscription at a time!';
    }
    if (check_purchase > 0) {
        if (check_purchase == 1) {
            toastr["error"](message);
        } else {
            toastr["error"]('you cannot select purchase, subscription and free at a time!');
        }

        return false;
    } else {
        if ($('#freePricing').is(":checked")) {
            $('#freePricing').val(3);
            $('#apply-discount-area').css('display', 'none');
            $('#apply-discount-area').removeClass("d-flex");
        } else {
            $('#freePricing').val('');
            $('#apply-discount-area').css('display', 'block');
        }
    }

});

$('body').on('keypress', '.valid_number', function(event) {
    var charCode = (event.which) ? event.which : event.keyCode;
    if (charCode != 46 && charCode != 45 && charCode > 31 &&
        (charCode < 48 || charCode > 57)) {
        toastr["error"]('Please Input Valid Number');
        return false;
    }


    return true;

});



$('#is_offer').on('click', function() {


    if ($('#is_offer').is(":checked")) {
        $('#is_offer').val(1);
        var stylec = '';
    } else {
        $('#is_offer').val('');
        var stylec = 'none';
    }
    $('#offer_coursediv').css('display', stylec);



});

function course_preview() {
    var course_id = $("#course_id").val();
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    var url = $("#base_urlrm").val();
    $.ajax({
        url: url + "/instructor-project-preview",
        type: "POST",
        data: {
            course_id: course_id,
            csrf_test_name: csrf_test_name
        },
        success: function(data) {
            $('.previewdetails').html(data);
            $('#preview_modal').modal('show');

        },
        error: function(xhr) {
            alert('failed!');
        }
    });
}

function course_public_view() {
    var course_id = $("#course_id").val();
    var  location= base_url + enterprise_shortname + '/course-details/' + course_id;
    window.open(location, '_blank');
}



$('#flexCheckDefault').on('click', function() {


    if ($('#flexCheckDefault').is(":checked")) {
        $('#flexCheckDefault').val(1);

    } else {
        $('#flexCheckDefault').val('');

    }

});


$('#flexSwitchCheckDefault').on('change', function() {


    if ($('#flexSwitchCheckDefault').is(":checked")) {
        $('#flexSwitchCheckDefault').val(1);

    } else {
        $('#flexSwitchCheckDefault').val('');

    }

});


$('#flexSwitchCheckDefault2').on('change', function() {


    if ($('#flexSwitchCheckDefault2').is(":checked")) {
        $('#flexSwitchCheckDefault2').val(1);

    } else {
        $('#flexSwitchCheckDefault2').val('');

    }

});

function check_preview(sl, div) {
    if ($('#is_preview_' + sl + '_' + div).is(":checked")) {
        $('#is_preview_' + sl + '_' + div).val(1);

    } else {
        $('#is_preview_' + sl + '_' + div).val('');

    }
}

$("#loader-icon").hide();

// function fileuploaders() {
//     var fd = new FormData();
//     $(".nxtpreviousbtn").hide();
//     $("#loader-icon").show();
//     var CSRF_TOKEN = $("#CSRF_TOKEN").val();
//     var url = $("#base_urlrm").val();
//     var stylec = '';
//     fd.append("video_file", $(".promotionalvideo")[0].files[0]);
//     fd.append('csrf_test_name', (CSRF_TOKEN));

//     $.ajax({
//        xhr: function() {
//                 var xhr = new window.XMLHttpRequest();
//                 xhr.upload.addEventListener("progress", function(evt) {
//                     if (evt.lengthComputable) {
//                         var percentComplete = ((Math.round(evt.loaded) / Math.round(evt.total)) * 100);
//                         $(".progress-bar").width(percentComplete + '%');
//                         $(".progress-bar").html(percentComplete+'%');
//                     }
//                 }, false);
//                 return xhr;
//             },
//         url: url + "/instructor-course-videoupload",
//         type: "POST",
//         dataType: 'json',
//         data: fd,
//          contentType: false,
//             cache: false,
//             processData:false,
//             beforeSend: function(){
//                 $(".progress-bar").width('0%');

//             },
//         success: function(data) {
//             if (data.type == "error") {
//                 $(".nxtpreviousbtn").show();
//                 $("#loader-icon").hide();
//                 $("#phppot-message").addClass("error");
//                 $("#phppot-message").text(data.error_message);
//                 toastr.success(data.error_message);
//             } else if (data.type == "success") {
//                var percentComplete = 100;
//                         // $(".progress-bar").width(percentComplete + '%');
//                         // $(".progress-bar").html(percentComplete+'%');
//                 $(".nxtpreviousbtn").show();
//                 $("#loader-icon").hide();
//                 toastr.success("Promotional video uploaded successfully");
//                 // $("#videoprogress").hide();


//                 let str = data.link;
//                 myArr = str.split("/");
//                 video_id = myArr[3];
//                 $('#url').val(data.link);
//             }
//         }
//     });
//       $('#videoprogress').css('display', stylec);  




// }


function handleFileSelect(evt) {
    evt.stopPropagation()
    evt.preventDefault()
    $(".nxtpreviousbtn").hide();
    var files = evt.dataTransfer ? evt.dataTransfer.files : $(this).get(0).files
    updateProgress(0)
    document.getElementById('progress-container').style.display = 'block';
    var video_name = $("#courseTitle").val();
    var description = $("#aboutCourse").val();

    /* Instantiate Vimeo Uploader */
    ;
    (new VimeoUpload({
        name: video_name,
        description: description,
        file: $(".promotionalvideo")[0].files[0],
        token: '9934bd59f90bb90c5b4b3526cdfa78c9',
        onError: function(data) {
            showMessage(JSON.parse(data).error, 'error');
        },
        onProgress: function(data) {
            updateProgress(data.loaded / data.total)
        },
        onComplete: function(videoId, index) {
            var url = 'https://vimeo.com/' + videoId
            $('#url').val(url);
            document.getElementById('trailervideo_delete_content').style.display = 'block';
            showMessage("Promotional video uploaded successfully", 'success');
            $(".nxtpreviousbtn").show();
        }
    })).upload()

    /* local function: show a user message */
    function showMessage(html, type) {
        /* hide progress bar */
        document.getElementById('progress-container').style.display = 'none'
        toastr.success(html);
    }
}



/**
 * Updat progress bar.
 */
function updateProgress(progress) {
    progress = Math.floor(progress * 100)
    var element = document.getElementById('progress')
    element.setAttribute('style', 'width:' + progress + '%')
    element.innerHTML = '&nbsp;' + progress + '%'
}
/**
 * Wire up drag & drop listeners once page loads
 */
document.addEventListener('DOMContentLoaded', function() {
    var browse = document.getElementById('formFile')
    browse.addEventListener('change', handleFileSelect, false)
});


function lessonvideoupload(qz, ls) {
    var browsevent = document.getElementById('providervideo_' + qz + '_' + ls);
    browsevent.addEventListener('change', lessonhandleFileSelect(this, qz, ls), false)
}

function lessonhandleFileSelect(evt, qz, ls) {
    //var files = evt.dataTransfer ? evt.dataTransfer.files : $(this).get(0).files
    var control = evt;
    lessonupdateProgress(0, qz, ls);
    document.getElementById('progress-container_' + qz + '_' + ls).style.display = 'block';
    $("#lessonsavebtn_" + qz + "_" + ls).hide();
    var video_name = $("#lesson_name_" + qz + '_' + ls).val();
    var description = $("#lessonDescription_" + qz + '_' + ls).val();

    var video = document.createElement('video');
    video.preload = 'metadata';
    video.onloadedmetadata = function() {
        window.URL.revokeObjectURL(video.src);
        // alert("Duration : " + video.duration + " seconds");
        convertHMS(qz, ls, video.duration)
    }
    video.src = URL.createObjectURL(control.files[0]);

    /* Instantiate Vimeo Uploader */
    ;
    (new VimeoUpload({
        name: video_name,
        description: description,
        file: $("#providervideo_" + qz + '_' + ls)[0].files[0],
        token: '9934bd59f90bb90c5b4b3526cdfa78c9',
        onError: function(data) {
            showsMessage(JSON.parse(data).error, 'error', qz, ls);
        },
        onProgress: function(data) {
            lessonupdateProgress(data.loaded / data.total, qz, ls)
        },
        onComplete: function(videoId, index) {
            var url = 'https://vimeo.com/' + videoId
            $('#provider_url_' + qz + '_' + ls).val(url);
            document.getElementById('video_delete_content_' + qz + '_' + ls).style.display = 'block';
            $("#lessonsavebtn_" + qz + "_" + ls).show();
            showsMessage("Lesson video uploaded successfully", 'success', qz, ls);
        }
    })).upload()

    /* local function: show a user message */
    function showsMessage(html, type, qz, sl) {
        /* hide progress bar */
        document.getElementById('progress-container_' + qz + '_' + ls).style.display = 'none'
        toastr.success("Lesson video uploaded successfully");
    }
}

function lessonupdateProgress(progress, qz, ls) {
    progress = Math.floor(progress * 100)
    var element = document.getElementById('progress_' + qz + '_' + ls)
    element.setAttribute('style', 'width:' + progress + '%')
    element.innerHTML = '&nbsp;' + progress + '%'
}

function cancel_video(qz, ls) {
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    var vurl = $('#provider_url_' + qz + '_' + ls).val();
    var vID = vurl.split('/');
    var videoID = vID[3];
    var url = $("#base_urlrm").val();
    var r = confirm("Do you want to delete?");
    if (r == true) {
        $.ajax({
            url: url + "/instructor-delete-video",
            type: "POST",
            data: {
                video_id: videoID,
                csrf_test_name: csrf_test_name
            },
            success: function(data) {
                toastr.success(data);
                var div = $('#iframe_' + qz + '_' + ls);
                if (div.length == 1) {
                    $('#iframe_' + qz + '_' + ls).remove();
                }
                document.getElementById('video_delete_content_' + qz + '_' + ls).style.display = 'none';
            },
            error: function(xhr) {
                alert('failed!');
            }
        });
    }
}


function cancel_trailer_video() {
    var csrf_test_name = $('[name="csrf_test_name"]').val();
    var vurl = $('#url').val();
    var vID = vurl.split('/');
    var videoID = vID[3];
    var url = $("#base_urlrm").val();
    var r = confirm("Do you want to delete?");
    if (r == true) {
        $.ajax({
            url: url + "/instructor-delete-video",
            type: "POST",
            data: {
                video_id: videoID,
                csrf_test_name: csrf_test_name
            },
            success: function(data) {
                toastr.success(data);
                document.getElementById('trailervideo_delete_content').style.display = 'none';
                $('#url').val('');
                $('.video-upload').html('');
            },
            error: function(xhr) {
                alert('failed!');
            }
        });
    }
}


function downloadablefile() {
    $('#multiple_filemodal').modal('show');
}

$('#save_downloadablefile').on('click', function(e) {
    var url = $("#base_urlrm").val();

    var csrf_test_name = $('[name="csrf_test_name"]').val();
    var course_id = $("#course_id").val();

    var fdata = new FormData();
    fdata.append("course_id", course_id);
    var dfile = $('input[name="downloadable_file[]"]');
    for (var i = 0; i < dfile.length; i++) {
        var ids = i + 1;
        var tagid = dfile[i].getAttribute('id');
        fdata.append("downloadable_file[]", $("#" + tagid)[0].files[0]);
    }
    fdata.append("totalfile", dfile.length);
    fdata.append("csrf_test_name", csrf_test_name);
    $.ajax({
        url: url + "/instinstructor-save-downloadablefiles",
        type: "POST",
        data: fdata,
        enctype: "multipart/form-data",
        processData: false,
        contentType: false,
        success: function(data) {
            toastr.success("Uploaded Successfully");
            $('#multiple_filemodal').modal('hide');
            $("#showfile_count").html(data);
         
            
        },
        error: function(xhr) {
            alert('failed!');
        }
    });



});


function basePrice() {
    var baseprice = $("#course_old_price").val();
    var disocunt = $("#course_discount").val();
    var disocunt_type = $("#discount_type").val();
    var course_price = $("#course_price").val();
    if (disocunt != '') {
        if (disocunt_type == 1) {
            var bprice = parseFloat(baseprice) - parseFloat(disocunt);
            $("#course_price").val(bprice);
        } else {
            var bprice = parseFloat(baseprice) - (parseFloat(baseprice) * parseFloat(disocunt)) / 100;
            $("#course_price").val(bprice);
        }

    } else {
        $("#course_price").val(baseprice);
    }
}




$(".progress").hide();
function excersizefileuploadpr(sl,id) {
$(".progress").show();
var allowedTypes = [
"application/pdf",
"application/msword",
"application/vnd.ms-office",
"application/vnd.openxmlformats-officedocument.wordprocessingml.document",
"application/vnd.openxmlformats-officedocument.presentationml.presentation",
"image/jpeg",
"image/png",
"image/jpg",
"image/gif",
"text/plain",
];
var last_record_id = $("#last_record_id_"+sl).val();
// alert(last_record_id);
var attachment= $("#downloadable_file"+sl)[0].files[0];
var fileType = attachment.type;

var fileTyperesult = fileType.split('/');

if(fileTyperesult[0] =="video"){
  toastrErrorMsg("This  file not allow!");
   $("#downloadable_file"+sl).val("");
   return false;
}else{
var fd = new FormData();
  fd.append("downloadable_file", $("#downloadable_file"+sl)[0].files[0]);
  fd.append("course_id", $("#course_id").val());
  fd.append("last_record_id", last_record_id);
  fd.append("file_id",id);
  fd.append("csrf_test_name", CSRF_TOKEN);



	// File upload via Ajax
		// e.preventDefault();
		$.ajax({
			xhr: function() {
				var xhr = new window.XMLHttpRequest();
				xhr.upload.addEventListener("progress", function(evt) {
					if (evt.lengthComputable) {
						var percentComplete = Math.round((evt.loaded / evt.total) * 100);
						$("#progress-bar_"+sl).width(percentComplete + '%');
						$("#progress-bar_"+sl).html(percentComplete+'%');
					}
			   }, false);
			   return xhr;
			},
			type: 'POST',
			url:  base_url + "frontend/instructor/course_download_upload",
			data: fd,
			contentType: false,
			cache: false,
			processData:false,
			beforeSend: function(){
				$("#progress-bar_"+sl).width('0%');
				// $('#uploadStatus_'+sl).html('<img src="images/loading.gif"/>');
			},
			error:function(){
				$('#uploadStatus_'+sl).html('<p style="color:#EA4335;">File upload failed, please try again.</p>');
			},
			success: function(resp){
					// $("#progress-bar_"+sl)[0].reset();
                    var last_recordid_obj = JSON.parse(resp);
                    var last_recordid = last_recordid_obj.last_record_id;
                    // alert(last_recordid);
                    // var onclick_val = "remove_file(this, '"+last_recordid+"')";

                    // $("#remove_sl_"+sl).removeAttr("onclick");
                    // $("#remove_sl_"+sl).attr("onclick", onclick_val);

                    $("#last_record_id_" + sl).attr('value', last_recordid);

                    $("#uploadStatus_"+sl).html('<p style="color:#28A74B;">File has uploaded successfully!</p>');

			}
		});
 }

}





$(window).scroll(function(e) {
    var $el = $('.sticky');
    var isPositionFixed = ($el.css('position') == 'fixed');
    if ($(this).scrollTop() > 1000 && !isPositionFixed) {
        $el.css({
            'position': 'fixed',
            'top': '90px',
            'z-index': '1',
            // 'right': '112px'
        });
    }
    if ($(this).scrollTop() < 1000 && isPositionFixed) {
        $el.css({
            'position': 'static',
            'top': '0px'
        });
    }
});


// resourse file upload progress
function resourseProgress(sl,lesson,resourse){
    $(".progress").show();



    var allowedTypes = [
"application/pdf",
"application/msword",
"application/vnd.ms-office",
"application/vnd.openxmlformats-officedocument.wordprocessingml.document",
"application/vnd.openxmlformats-officedocument.presentationml.presentation",
"image/jpeg",
"image/png",
"image/jpg",
"image/gif",
"text/plain",
];

var attachment= $("#downloadable_file_lesson_"+sl+'_'+lesson+'_'+resourse)[0].files[0];
var fileType = attachment.type;

var fileTyperesult = fileType.split('/');

if(fileTyperesult[0] =="video"){
  toastrErrorMsg("This  file not allow!");
   $("#downloadable_file_lesson_"+sl+'_'+lesson+'_'+resourse).val("");
   return false;
}else if(fileTyperesult[1] =="javascript"){
   toastrErrorMsg("This  file not allow!");
   $("#downloadable_file_lesson_"+sl+'_'+lesson+'_'+resourse).val("");
   return false;
}else{    
var bar = $('#progress-bar_'+sl+'_'+lesson+'_'+resourse);
var percent = $('#progress_'+sl+'_'+lesson+'_'+resourse);
var last_response_length = 0;
    $.ajax({
        xhr: function() {
            var xhr = new XMLHttpRequest(); 
            xhr.onprogress = function(data) {
                var response = data.currentTarget.response,
                    progress = response.slice(last_response_length) | 0;
                last_respons_length = response.length; 
       
                for(var i=1;i<=100;i++){
                    var percentVal = i+'%';
                    // alert(percentVal);
                    bar.width(percentVal);
                    bar.html(percentVal);
                }
              

            };
            return xhr;
        },
        success: function(response) {
            $(bar).val(100); // All done!
        }
    });
 }

}



// passig_grate first step

$('#passing_grade').on('keyup',function(){
    var passing_grade =$("#passing_grade").val();
    if(passing_grade>101){
        toastr.error("Put value less than 100 or equal");
        $("#passing_grade").val('');
    }

});



function fileuploaderprogress(chpter,lesson,file) {

var allowedTypes = [
"application/pdf",
"application/msword",
"application/vnd.ms-office",
"application/vnd.openxmlformats-officedocument.wordprocessingml.document",
"application/vnd.openxmlformats-officedocument.presentationml.presentation",
"image/jpeg",
"image/png",
"image/jpg",
"image/gif",
"text/plain",
];
var lesson_type = $('#lesson_type_' + chpter + '_' + lesson).val();
var attachment= $("#attachment_" + chpter+'_'+lesson)[0].files[0];
var fileType = attachment.type;

var fileTyperesult = fileType.split('/');


if(lesson_type == 2){
if(fileType != 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'){
  toastrErrorMsg("Only docx file allow!");
  $("#attachment_" + chpter+'_'+lesson).val("");
  return false;
}
}
if(lesson_type == 3){
if(fileTyperesult[0] != 'image'){
  toastrErrorMsg("Only picture file allow!");
  $("#attachment_" + chpter+'_'+lesson).val("");
  return false;
}
}
if(lesson_type == 4){
if(fileType != 'application/vnd.openxmlformats-officedocument.presentationml.presentation'){
  toastrErrorMsg("Only power point file allow!");
  $("#attachment_" + chpter+'_'+lesson).val("");
  return false;
}
}
if(lesson_type == 5){
    if(fileType != 'application/pdf'){
    toastrErrorMsg("Only pdf file allow!");
    $("#attachment_" + chpter+'_'+lesson).val("");
    return false;
    }
}
// alert(fileType); return false;

if (!allowedTypes.includes(fileType)) {
toastrWarningMsg(
  "Please select a valid file (PDF/DOC/DOCX/JPEG/JPG/PNG/GIF/TEXT)."
);
$("#attachment_" + chpter+'_'+lesson).val("");
return false;
} else {

// $("." + msgscls).html(
//   '<p style="color:#28A74B;">File has attach successfully!</p>'
// );
$(".progress-bar_" + chpter+'_'+lesson).html(
  '<div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">100%</div></div>'
);
}
}
</script>

<style>
    .progress {
    display: -ms-flexbox;
    display: flex;
    height: 20px;
    overflow: hidden;
    font-size: .75rem;
    background-color: #e9ecef;
    border-radius: 0.25rem;
    margin-top: 10px;
}

.progress-bar{
    display: -ms-flexbox;
    display: flex;
    -ms-flex-direction: column;
    flex-direction: column;
    -ms-flex-pack: center;
    justify-content: center;
    overflow: hidden;
    color: #fff;
    text-align: center;
    white-space: nowrap;
    background-color: #28a745;
    transition: width .6s ease;
    font-size: 16px;
    text-align: center;
}
</style>